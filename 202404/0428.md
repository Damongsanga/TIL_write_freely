# TIL (Today I Learned)

# 4ì›” 28ì¼ ì¼ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## âœ¨ì˜¤ëŠ˜ ì§„í–‰í•œ ë‚´ìš©

- [x]  merge reqeust template
- [x]  ì¸ì¦ ì¸ê°€ ìˆ˜ì •
- [x]  ë©¤ë²„ ë„ë©”ì¸ êµ¬í˜„
- [x]  Swagger êµ¬í˜„
- [x]  í…ŒìŠ¤íŠ¸ ìœ ì € ìƒì„± ë° ì¸ì¦ êµ¬í˜„

## âœ¨ì›”ìš”ì¼ì— ì§„í–‰í•  ë‚´ìš©

- [ ]  ì„¤ê³„ ë§ˆë¬´ë¦¬
    - [ ]  API ëª…ì„¸ì„œ ì™„ì„±
    - [ ]  API ëª…ì„¸ì„œ í”¼ë“œë°±
    - [ ]  í™”ë©´ ëª…ì„¸ì„œ í”¼ë“œë°±

- [ ]  application.yml ìˆ˜ì •
    - [ ]  `dialect: org.hibernate.dialect.MySQL8Dialect` â†’ 
    `MySQLDialect`ë¡œ ìˆ˜ì • (Deprecated ì´ìŠˆ)

- [ ]  health check ì•ˆë˜ëŠ” ì´ìœ  ê²€í† 
    - [ ]  ë³´ë©´ swaggerë„ ì•ˆë¨. ì™¸ë¶€ì—ì„œì˜ ìš”ì²­ ìì²´ë¥¼ ëª»ë°›ëŠ” ëŠë‚Œ
    - [ ]  webconfigì— ì˜í•œ cors ë•Œë¬¸ì¸ê°€? ê·¸ê±´ ì•„ë‹Œ ê²ƒ ê°™ìŒ
    - [ ]  NGINX ë•Œë¬¸ì¼ìˆ˜ë„ ìˆë‹¤ê³  í•¨
        - [ ]  [https://berrrrr.github.io/programming/2021/07/18/swagger-nginx-settings/](https://berrrrr.github.io/programming/2021/07/18/swagger-nginx-settings/)
        - [ ]  [ì´ê²Œ ë‹µì¸ê²ƒ ê°™ìŒ](https://ssnotebook.tistory.com/entry/Spring-Boot-SwaggerOpenAPI-Failed-to-load-remote-configuration-Reverse-Proxy) (ì•„ë‹˜..)
    - [ ]  ì´ìœ ê°€ ê°™ì€ ê²ƒ ê°™ì€ë° ã… ã…  ì™œì§€?

- [ ]  Swagger ì„¤ì •
    - [ ]  ê¸°ë³¸ êµ¬í˜„ ì™„ë£Œ ë° Authorization ì„¤ì • ì™„ë£Œ
    - [ ]  ê¸¸ì¬íŒ€êº¼ ë°›ì•„ì„œ ì°¸ê³ í•´ì„œ ì¶”ê°€ êµ¬ì„±í•´ë³´ê¸°
- [ ]  S3 ì°½ì§„ì´í•œí…Œ ìš”ì²­

- [ ]  ë¬¸ì œ ë„ë©”ì¸ êµ¬í˜„
    - [ ]  ë¬¸ì œ ìƒì„± êµ¬í˜„ (ADMIN ê³„ì •ë§Œ í•  ìˆ˜ ìˆë„ë¡)
        - [ ]  ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì—…ë¡œë“œ í•˜ë„ë¡ í•´ì•¼í•  ê²ƒ ê°™ì€ë°..
        - [ ]  ìµœì•…ì˜ ê²½ìš°ëŠ” markdown íŒŒì¼ ì§ì ‘ ë„£ì–´ì£¼ê³  urlì„ ì…ë ¥í•´ì„œ ìƒì„±í•˜ê²Œ í•˜ë„ë¡ í•  ìˆ˜ ë°–ì— ì—†ì„ë“¯
    - [ ]  ë‹¨ì¼ ë¬¸ì œ ì¡°íšŒ êµ¬í˜„
    - [ ]  ë¬¸ì œ ì„ ì • ë¡œì§ êµ¬í˜„ (ë‚´ê°€ í’€ì—ˆë˜ ë¬¸ì œë¥¼ ì œì™¸í•œ ë‚œì´ë„ì—ì„œ ì„ ì •, ë§Œì•½ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì•„ë¬´ê±°ë‚˜ ì„ ì •)
    - [ ]  ì‹¤ì œ ë¬¸ì œ êµ¬í•˜ëŠ” ê±°ëŠ” ì•„ì§ ëŒ€ê¸°. í…ŒìŠ¤íŠ¸ë¡œë§Œ ì§„í–‰

- [ ]  ì†Œë‚˜íë¸Œ ì„¤ì¹˜

- [ ]  ì±„ì  ì„œë²„ êµ¬í˜„
    - [ ]  EC2 2ë²ˆì§¸ ë°›ì•„ì„œ ì„œë²„ ì„¸íŒ…
    - [ ]  ì±„ì  ì„œë²„ ì„¤ì¹˜
    - [ ]  ì±„ì  ì„œë¹„ìŠ¤ êµ¬í˜„ (ì›¹ì†Œì¼“ì„ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¶ˆí•„ìš”) â‡’ ì¼ë‹¨ì€ ë™ê¸°ë¡œ êµ¬í˜„
    - [ ]  í…ŒìŠ¤íŠ¸ ìœ„í•œ ì±„ì  ì„œë¹„ìŠ¤ ìš”ì²­ë§Œ í•´ë³´ê¸°

## âœ¨ì½ì–´ë³¼ ë‚´ìš©

[spring actuator ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ê¸°](https://techblog.woowahan.com/9232/)

## âœ¨ë°°ìš´ ë‚´ìš©

- favicon
    - ë¸Œë¼ìš°ì €ì—ì„œ /error, /favicon.ico ë¥¼ ê°™ì´ ìš”ì²­í•˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ëº´ì£¼ì–´ì•¼ í•¨
    
    ```java
        @Bean
        public WebSecurityCustomizer webSecurityCustomizer() { // securityë¥¼ ì ìš©í•˜ì§€ ì•Šì„ ë¦¬ì†ŒìŠ¤
            return web -> web.ignoring()
                // error endpointë¥¼ ì—´ì–´ì¤˜ì•¼ í•¨, favicon.ico ì¶”ê°€!
                .requestMatchers("/error", "/favicon.ico");
        }
    
    ```
    

### swagger authorize ì„¤ì •í•˜ê¸°

- @Operation ì‚¬ìš©í•˜ê¸°

```java
    @PostMapping("/logout")
    @Operation(summary = "My endpoint", security = @SecurityRequirement(name = "bearerAuth"))
    public ResponseEntity<Void> logout(){
        oAuthService.logout();
        return ResponseEntity.ok().build();
    }
```

- ì „ì²´ ì ìš©í•˜ê¸°

```java
@Configuration
public class SwaggerConfig {
	@Bean
	public OpenAPI openAPI() {
		final String securitySchemeName = "bearerAuth";
		final String moduleName = "urturn";
		final String apiTitle = String.format("%s API", StringUtils.capitalize(moduleName));

		return new OpenAPI()
			.components(new Components()
				.addSecuritySchemes(securitySchemeName,
					new SecurityScheme()
						.name(securitySchemeName)
						.type(Type.HTTP)
						.scheme("bearer")
						.bearerFormat("JWT"))) // authorize ì ìš©

			.security(List.of(
				new SecurityRequirement().addList("bearerAuth")
			)) // ì „ì²´ ì ìš©

			.info(new Info()
				.title(apiTitle)
				.description("ì–´ë§ˆì–´ë§ˆí•˜ê²Œ ì¬ë°Œê³  ìœ ìš©í•œ í˜ì–´í”„ë¡œê·¸ë˜ë° ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤")
				.version("1.0.0"));

	}
}
```

# ğŸ˜œÂ Todayâ€™s Small Happiness

# ğŸ§Â Letâ€™s Think About It

# ğŸ™€Â Got Stuck..