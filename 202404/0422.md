# TIL (Today I Learned)

# 4ì›” 22ì¼ ì›”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## âœ¨ì˜¤ëŠ˜ ì§„í–‰í•œ ë‚´ìš©

- [ ]  ì„œë²„ ì„¸íŒ…
    - [x]  ec2
    - [x]  nginx
        - [x]  SSL
        - [ ]  conf.d ìˆ˜ì • í•„ìš”
        - [x]  -dev, -deploy ìˆ˜ì •
    - [ ]  docker
        - [x]  docker ì„¤ì¹˜
        - [ ]  docker compose ì—†ì´ ì»¨í…Œì´ë„ˆ ë³„ë„ë¡œ ì˜¬ë¦¬ê¸°
            - [ ]  back
            - [ ]  front nginx
    - [ ]  jenkins
        - [x]  ì„¤ì¹˜
        - [x]  docker ì„¤ì¹˜
        - [ ]  credentials
        - [ ]  webhook ì„¤ì •
        - [ ]  íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
    - [ ]  docker-compose
        - [ ]  docker-compose.yml
        - [ ]  Dockerfile
    - [ ]  Sonarqube

```yaml
version: '3.1'

services:
  jenkins:
    container_name: jenkins
    networks:
      - urturn
    build:
      context: ./jenkins
      dockerfile: Dockerfile
    image: ${JENKINS_IMAGE_NAME}
    restart: always
    ports:
      - "3100:8080"
      - "50000:50000"
    volumes:
      - /var/jenkins_home:/var/jenkins_home
      - /var/run/docker.sock:/var/run/docker.sock
    user: jenkins

  db:
    container_name: db
    networks:
      - urturn
    image: mysql:8.0.36
    restart: always
    healthcheck:
      test: /bin/sh -c "mysqladmin ping -h db -u urturn -purturn"
      interval: 20s
      timeout: 5s
      retries: 5
      start_period: 40s
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: urturn
      MYSQL_USER: urturn
      MYSQL_PASSWORD: urturn
    volumes:
      - data_volume:/var/lib/mysql

  redis:
    container_name: redis
    hostname: redis
    networks:
      - urturn
    image: redis
    restart: always
    healthcheck:
      test: /bin/sh -c "redis-cli -h redis -a urturn!@ ping"
      interval: 20s
      timeout: 5s
      retries: 5
      start_period: 40s
    command: redis-server --requirepass urturn!@ --port 6379
    ports:
    - "6379:6379"

  back:
    container_name: back
    build:
      context: ./back
      dockerfile: Dockerfile
    image: ${BACK_DEV_IMAGE_NAME}:${IMAGE_TAG}
    networks:
      - urturn
    restart: always
    healthcheck:
      test: "curl --fail --silent back:8080/actuator/health | grep UP || exit 1"
      interval: 20s
      timeout: 5s
      retries: 5
      start_period: 40s
    ports:
      - "3002:8080"
    depends_on:
      - db
      - redis

  front:
    container_name: front
    networks:
      - urturn
    build:
      context: ./front
      dockerfile: Dockerfile
    image: ${FRONT_IMAGE_NAME}
    restart: always
    ports:
      - "3001:3001"
    volumes:
      - ./front/static:/usr/share/nginx/html
      - ./front/conf.d:/etc/nginx/conf.d
    depends_on:
      - back

volumes:
  data_volume:
    external: true

networks:
  urturn:
    external: true
```

- [ ]  ë©´ì ‘
    - [x]  í”„ë¡œì íŠ¸ë³„ íšŒê³  ë‚´ìš© ì •ë¦¬
    - [x]  ë©´ì ‘ ì§ˆë¬¸ ë‹¤ì‹œ ì²˜ìŒë¶€í„° ì½ì–´ë³´ê¸°
    - [x]  ê¸°íƒ€ ë¶€ë¶„ ì±„ìš°ê¸° (ë‚´ìš© ë³„ë¡œ ì—†ìœ¼ë‹ˆ ë¹¨ë¦¬ ë§ˆë¬´ë¦¬)

## âœ¨ë‚´ì¼ ì§„í–‰í•  ë‚´ìš©

- [ ]  ì„œë²„ ì„¸íŒ…
    - [x]  nginx
        - [ ]  conf.d ìˆ˜ì • í•„ìš”
    - [ ]  docker
        - [ ]  docker compose ì—†ì´ ì»¨í…Œì´ë„ˆ ë³„ë„ë¡œ ì˜¬ë¦¬ê¸°
            - [ ]  back
            - [ ]  front nginx
    - [ ]  jenkins
        - [ ]  credentials
        - [ ]  webhook ì„¤ì •
        - [ ]  íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
    - [ ]  docker-compose
        - [ ]  docker-compose.yml
        - [ ]  Dockerfile
    - [ ]  Sonarqube
- [ ]  ì˜¤í›„ ERD ì™„ì„± (ì°½ì§„ì´ë‘ íšŒì˜)
- [ ]  ë©´ì ‘
    - [ ]  ì§‘ì—ì„œ ë‹¤ì‹œ í•œë°”í€´ ëŒë¦¬ê¸°
    - [ ]  ë‚´ ë¸”ë¡œê·¸ í•œë²ˆ ì­‰ ì½ì–´ë³´ê¸°
    - [ ]  2PC ì‹¬í™” (ë°ì´í„° ì¤‘ì‹¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì„¤ê³„ 9ì¥ ì¼ê´€ì„±ê³¼ í•©ì˜)
        - [ ]  [https://www.devkuma.com/docs/data-intensive-application/9/](https://www.devkuma.com/docs/data-intensive-application/9/)

# ğŸ˜œÂ Todayâ€™s Small Happiness

- ì§‘ ì™€ì„œ ê·¸ë˜ë„ ê³µë¶€ê°€ ì¢€ ì˜ëœ ê²ƒ ê°™ìŒ

# ğŸ§Â Letâ€™s Think About It

- í•  ìˆ˜ ìˆëŠ”ë° ê¹Œì§€ í•´ë³´ì. ë…¸ë² ì´ìŠ¤ 10ê°œì›”ì— ì´ì •ë„ë©´ ì •ë§ ë§ì´ ì„±ì¥í•œê±°ì•¼
- ê±´ê°•ê´€ë¦¬ ì˜ í•˜ê³  ì´ ì„±ì¥ ê³¼ì •ì„ ì¦ê¸°ì
    - ì´ëŸ´ë ¤ê³  ë‚˜ì˜¨ê±°ì–ì•„! ã…ã…

# ğŸ™€Â Got Stuck..