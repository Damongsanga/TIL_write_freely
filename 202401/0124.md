# TIL (Today I Learned)

# 1ì›” 24ì¼ ìˆ˜ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## í”„ë¡œì íŠ¸ 13ì¼ì°¨

### ì§„í–‰ ë‚´ìš©

### ì˜¤ëŠ˜ í•œ ë‚´ìš©

- [x]  ìŠ¤í”„ë§ ì‹œíë¦¬í‹° with JWT Token ê³µë¶€
- [x]  ë¡œê·¸ì¸ êµ¬í˜„(without redis)
- [x]  ë¡œê·¸ì¸ ìœ ì € ì •ë³´ ê°€ì ¸ì˜¤ê¸°
- [x]  ë©¤ë²„ name ë“¤ì–´ê°€ì•¼ ë˜ëŠ” ë¶€ë¶„ ì „ë¶€ë‹¤ ì œê³µâ€¦â€¦â€¦

### ë‚´ì¼ í•  ë‚´ìš©

- [ ]  spring security with redis ê³µë¶€ (ì–´ë””ì— í† í° ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ”ê°€? â‡’ Spring Context?)
- [ ]  í† í° ê²€ì‚¬ ë©”ì»¤ë‹ˆì¦˜ ì •í™•í•œ ì´í•´ì™€ access token ë§Œë£Œì— ë”°ë¥¸ ì¬ë°œê¸‰ ë¡œì§ êµ¬í˜„
- [ ]  ë¡œê·¸ì•„ì›ƒ êµ¬í˜„

## ì˜¤ëŠ˜ ë§‰íŒ ë¶€ë¶„

## í•´ê²°í•œ ë¶€ë¶„

## ê³µë¶€í•˜ë‹¤ ì•ˆ ê²ƒë“¤

# PKì— ëŒ€í•˜ì—¬

### PKë¥¼ intë¡œ í•˜ëŠ”ê°€ varcharë¡œ í•˜ëŠ”ê°€?

[https://devnumgo.tistory.com/entry/primary-keyë¥¼-intí˜•ìœ¼ë¡œ-í• -ê²ƒì¸ê°€-varcharë¡œ-í• -ê²ƒì¸ê°€](https://devnumgo.tistory.com/entry/primary-key%EB%A5%BC-int%ED%98%95%EC%9C%BC%EB%A1%9C-%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80-varchar%EB%A1%9C-%ED%95%A0-%EA%B2%83%EC%9D%B8%EA%B0%80)

[http://www.gurubee.net/article/66137](http://www.gurubee.net/article/66137)

[https://leo-bb.tistory.com/83](https://leo-bb.tistory.com/83)

- **ì´ë¡ ìƒìœ¼ë¡œ intê°€ ìœ ë¦¬**
    - MySql ê¸°ì¤€ìœ¼ë¡œ inno DB storage engineë¡œ index, dataëŠ” on-disk êµ¬ì¡°ìœ„ì— ì¡´ì¬
    - ë””ìŠ¤í¬ íŠ¹ì„±ìƒ ë°ì´í„° ì¡°íšŒì‹œ ë¸”ëŸ­ë‹¨ìœ„ë¡œ ì½ê²Œë˜ë©° ìµœì†Œ ë‹¨ìœ„ê°€ ì¡´ì¬í•œë‹¤. (inno DB â†’ í˜ì´ì§€)
    - ë³´í†µ ì´ëŠ” 16kb ì´ë©° í˜¹ì‹œëª¨ë¥¼ ìƒí™©ì— ëŒ€ë¹„í•´ 1kbëŠ” ë¹„ì›Œë‘”ë‹¤
    
    - **B-Tree íŠ¹ì„±**
        - 1ê°œì˜ í˜ì´ì§€ì— intëŠ” 3750ê°œ, charëŠ” 2500ê°œ â†’ intê°€ ë” ì ì€ page í•„ìš”
        - node balanceë¥¼ ë§ì¶”ëŠ” ê³¼ì •ì—ì„œ page split (í° ë¹„ìš©) ë°œìƒ ìµœì†Œí™”
    - **ì¡°íšŒì‹œ ë¹„êµê°€ intê°€ ê°„í¸í•˜ê³  ë¹ ë¦„**
        - int : <, >, =
        - char : %something, something%
    - **charëŠ” â€˜ â€˜ ê³µë°±ë„ 1byteë¡œ ì·¨ê¸‰í•˜ì—¬ â€˜aâ€™ì™€ â€˜a â€˜ê°€ ë‹¤ë¥¸ ë°ì´í„°ë¡œ ì¸ì‹ë¨**

- **í•˜ì§€ë§Œ ì„œë¹„ìŠ¤ì™€ í…Œì´ë¸”ì˜ íŠ¹ì„±ì„ ê³ ë ¤í•˜ì—¬ ë³‘í–‰í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë³´í†µì´ë‹¤**
    - ë¬¸ìí˜•ì˜ ê²½ìš° ì¤‘ë³µì œê±°ë¥¼ ìœ„í•´ ëœë¤ ë‚ ì§œë‚˜ ìˆ«ìë¥¼ ë¶™ì´ëŠ” í˜•ì‹ë„ ì‚¬ìš©
    - ì˜¤ë¼í´ì€ ì‹œí€€ìŠ¤ ì‚¬ìš©
    - ì˜¤íˆë ¤ ì¸ì¡°í‚¤ë¥¼ í›„ìˆœìœ„ë¡œ ìƒê°í•´ì•¼í•œë‹¤ëŠ” ì˜ê²¬ë„ ì¡´ì¬

### PKì— int? bigint? UUID?

- **int (4 byte)**
    - bigintì— ë¹„í•´ 10%ê°€ëŸ‰ ë””ìŠ¤í¬ ìš©ëŸ‰ ì ˆì•½
    - ì¤‘ê·œëª¨ì˜ DBëŠ” ì„œë²„ ìš´ìš©ì— ë³´ë‹¤ íš¨ìœ¨ì 
    - B-Tree íŠ¹ì„±ìƒ intê°€ ìœ ë¦¬
        - ìë£Œí˜•ì˜ í¬ê¸°ëŠ” BíŠ¸ë¦¬ êµ¬ì¡° ìƒ ê²€ìƒ‰ ì†ë„ì— ì°¨ì´ë¥¼ ì•¼ê¸°í•¨
        - BíŠ¸ë¦¬
            - ë£¨íŠ¸ì— í•´ë‹¹í•˜ëŠ” í˜ì´ì§€ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¼
            - ì´í›„ ìì‹ ë…¸ë“œì˜ ê°’ì„ í™•ì¸í•˜ê³  ì°¨ë¡€ëŒ€ë¡œ ìì‹ ë…¸ë“œë¡œ í˜ì´ì§€ë¥¼ ì˜¬ë¦¼
            - í˜ì´ì§€ì˜ í¬ê¸°ëŠ” 16kbë¡œ ê³ ì •(ì„¤ì •ìœ¼ë¡œ ìˆ˜ì •ì€ ê°€ëŠ¥)
                - ì†ë„ê°€ ê°€ì¥ ë¹ ë¥´ê¸° ë•Œë¬¸
            - INTì˜ ê°’ì€ 4 ë°”ì´íŠ¸ì´ê³  ë°ì´í„° ì£¼ì†Œê°€ 12ë°”ì´íŠ¸
                - í•œ í–‰ì´ 16 ë°”ì´íŠ¸ì˜ í¬ê¸°ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— í•œ í˜ì´ì§€ëŠ” 1024ê°œ ê°€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŒ
            - BIGINTëŠ” 8ë°”ì´íŠ¸ì´ê¸° ë•Œë¬¸ì— ì ˆë°˜ ì •ë„ì˜ ë°ì´í„°ë°–ì— ê°€ì§€ì§€ ëª»í•¨
            - í•œ í˜ì´ì§€ì— ë°ì´í„°ë¥¼ ë” ë§ì´ ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— ê²€ìƒ‰(ì¸ë±ì‹± í™œìš©)ì— ìˆì–´ì„œ ì‘ì€ ìë£Œí˜•ì´ ìœ ë¦¬í•¨!!
- **bigint (8 byte)**
    - í–¥í›„ ì—…ê·¸ë ˆì´ë“œ ê°€ëŠ¥ì„±ì´ ìˆìœ¼ë©´ bigintë¥¼ ì“¸ ê²ƒ (ê¹€ì˜í•œ ê°•ì‚¬ë‹˜ë„ ì´ë ‡ê²Œ ì¶”ì²œ)
    - ì¶”í›„ ìˆ˜ì •ì´ ë§¤ìš° ì–´ë µë‹¤ (ì–‘ë„ ë§ê³  PKëŠ” ë‹¤ë¥¸ í…Œì´ë¸”ì—ì„œ FKë¡œ ì“°ëŠ” ê²½ìš°ë„ ë§ìŒ)
- **UUID (Universally Unique ID) (16 byte)**
    - java 5ë¶€í„° ì§€ì› (`java.util.UUID`)
    - 128ë¹„íŠ¸ ë°ì´í„°ë¡œ 100% ìœ ë‹ˆí¬í•˜ì§€ëŠ” ì•Šìœ¼ë‚˜ ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë‚®ì€ í‚¤
    - **auto incermentëŠ” í‚¤ë¥¼ ì˜ˆì¸¡í•˜ê¸° ì‰¬ì›Œ SQL Injectionì— ì·¨ì•½**
    - **ë¶„ì‚°í™˜ê²½ì—ì„œëŠ” UUIDë¥¼ ì¶”ì²œ (auto incrementë¥¼ ì‚¬ìš©í•˜ë©´ ì¶©ëŒ ê°€ëŠ¥ì„±ì´ ë†’ìŒ, Duplicate Key)**
    - BINARY(16) or VARCHAR
    - auto incrementë³´ë‹¤ ë©”ëª¨ë¦¬ ë§ì´ ì‚¬ìš©, insertì‹œ ì‹œê°„ë„ ë” ê±¸ë¦¼
    
    ```java
    @Id
    @GeneratedValue(generator = "uuids")
    @GenericGenerator(name= "uuid2", strategy = "uuid")
    private UUID id;
    ```
    

### +a) ë¹„ì •ê·œí™”ì˜ ìœ„í—˜ì„±

- ê²Œì‹œíŒê³¼ ëŒ“ê¸€ì˜ í…Œì´ë¸”ì„ ìƒê°í•  ë•Œ
    - ëŒ“ê¸€ì€ ì™¸ë˜í‚¤ë¡œ ê²Œì‹œê¸€ IDë¥¼ ê°€ì§
    - ê²Œì‹œíŒì€ ëŒ“ê¸€ì˜ ê°¯ìˆ˜ë¥¼ ì»¬ëŸ¼ìœ¼ë¡œ ê°€ì§
- ì™œ ëŒ“ê¸€ì˜ ê°¯ìˆ˜ê°€ ì»¬ëŸ¼ìœ¼ë¡œ?
    - ëŒ“ê¸€ ìˆ˜ëŠ” ëŒ“ê¸€ í…Œì´ë¸”ì— countë¥¼ í•˜ëŠ” ê²ƒìœ¼ë¡œ ì–»ì„ ìˆ˜ ìˆìŒ
- ì„±ëŠ¥ì„ ìœ„í•˜ì—¬ ë¹„ì •ê·œí™”í•˜ê³  ì»¬ëŸ¼ì„ ì¶”ê°€í•œ ê²ƒ
- ë¹„ì •ê·œí™”ê°€ í•­ìƒ ì¢‹ì€ ê²ƒì€ ì•„ë‹˜
    - ex) ê²Œì‹œíŒ í…Œì´ë¸”ì˜ ëŒ“ê¸€ ìˆ˜ ì»¬ëŸ¼ê³¼ ì‹¤ì œ ëŒ“ê¸€ í…Œì´ë¸” ë‹´ê¸´ ëŒ“ê¸€ ê°¯ìˆ˜ê°€ ë‹¤ë¥¼ ë•Œë„ ìˆìŒ
    - ëŒ“ê¸€ì´ ì¶”ê°€ë˜ëŠ” ìƒí™©
        - ê²Œì‹œíŒì—ì„œëŠ” update, ëŒ“ê¸€ì—ì„œëŠ” insertê°€ ì¼ì–´ë‚¨
        - ì´ ì‘ì—…ì´ ì´ë¤„ì§€ëŠ” ìˆœê°„ì— ì›ìì„±ì´ ë³´ì¥ë˜ì§€ ì•ŠìŒ
        - ë°ì´í„° ì˜¤ë¥˜ ë°œìƒ ìˆœê°„ì´ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒ
- ë°ì´í„°ì™€ JOINì´ ë§ì•„ì§€ë©´ ì¿¼ë¦¬ ì„±ëŠ¥ì„ í”íˆ ê±±ì •í•¨
- ê·¸ëŸ¬ë‚˜Â `ë¹„ì •ê·œí™”ëŠ” ê³µì§œê°€ ì•„ë‹ˆë‹¤`
    - ë¹„ì •ê·œí™” = ê¸°ìˆ  ë¶€ì±„
- ì„±ëŠ¥ì€ ë†’ì•„ì§€ë‚˜ ë¬¸ì œê°€ ìƒê¸¸ ì—¬ì§€â†’ ìœ ì§€ ë³´ìˆ˜ ë¹„ìš© ì¦ê°€
- ì´ˆë°˜ë¶€í„° ë¹„ì •ê·œí™”í•˜ëŠ” ê²ƒì€ ìì œ
    - ìš´ì˜í•˜ë©´ì„œ ì„±ëŠ¥ì´ ëŠë ¤ì§ˆ ë•Œ ê³ ë ¤
    - ì°¨ë¼ë¦¬ ë©”ëª¨ë¦¬ì™€ ìºì‹œë¥¼ ë” í™•ë³´í•˜ê±°ë‚˜ ì¿¼ë¦¬ë§Œ ìµœì í™”í•˜ëŠ” ê²ƒì´ í›¨ì”¬ ë” ì´ë“ì¼ ìˆ˜ ìˆìŒ
    - ë¹„ìš©ì„ ê³ ë ¤í•˜ì—¬ ê²°ì •í•  ì‚¬í•­!!
- ìƒê°ë³´ë‹¤.. select count(*)ëŠ” ëŠë¦¬ì§€ ì•Šë‹¤
    - BíŠ¸ë¦¬ ì¸ë±ì‹± í˜ì´ì§€ì˜ ê°’ì„ ë³´ê³  ì¹´ìš´íŒ…!
- ë˜ ë°˜ë³µë˜ëŠ” ì¿¼ë¦¬ëŠ” ë””ë¹„ì—ì„œ ìºì‹±ì„ í†µí•´ ì„±ëŠ¥ ìµœì í™” ì§„í–‰!

# ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì‹œì‘

[https://hoon9901.github.io/springboot-jwt-tutorial3/](https://hoon9901.github.io/springboot-jwt-tutorial3/)

- **Basic vs Bearer ì¸ì¦ë°©ì‹ì´ë€?**
    - [https://velog.io/@cada/í† ê·¼-ê¸°ë°˜-ì¸ì¦ì—ì„œ-bearerëŠ”-ë¬´ì—‡ì¼ê¹Œ](https://velog.io/@cada/%ED%86%A0%EA%B7%BC-%EA%B8%B0%EB%B0%98-%EC%9D%B8%EC%A6%9D%EC%97%90%EC%84%9C-bearer%EB%8A%94-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C)
    - [https://velog.io/@tosspayments/Basic-ì¸ì¦ê³¼-Bearer-ì¸ì¦ì˜-ëª¨ë“ -ê²ƒ](https://velog.io/@tosspayments/Basic-%EC%9D%B8%EC%A6%9D%EA%B3%BC-Bearer-%EC%9D%B8%EC%A6%9D%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83)
    - Bearer == ì†Œìœ ì : â€œì´ í† í°ì˜ ì†Œìœ ìì—ê²Œ ê¶Œí•œì„ ë¶€ì—¬í•´ì¤˜â€ë¼ëŠ” ì˜ë¯¸
    - **ì‚¬ì‹¤ìƒ í† í° ì¸ì¦ê³¼ ë™ì¼í•œ ì˜ë¯¸ë¡œ ì‚¬ìš©**
    - ë‘ ì¸ì¦ ë°©ì‹ì˜ ì°¨ì´
    - í† ìŠ¤í˜ì´ë¨¼ì¸ ì˜ ê²½ìš° ì–´ë–»ê²Œ??

- ì•”í˜¸í™” í‚¤ëŠ” ì™œ í•„ìš”í•œê°€?
    - í† í°ì˜ ì•”í˜¸í™”, ë³µí˜¸í™”
    - **HS256 ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš© (32ê¸€ì ì´ìƒ) â†’ ì´ê²Œ ë­”ê°€?**

### A**ccess Token &** Refresh Token

- [https://velog.io/@chuu1019/Access-Tokenê³¼-Refresh-Tokenì´ë€-ë¬´ì—‡ì´ê³ -ì™œ-í•„ìš”í• ê¹Œ](https://velog.io/@chuu1019/Access-Token%EA%B3%BC-Refresh-Token%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%99%9C-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C)
- ìœ ì € ì‹ ì›, ê¶Œí•œ ê²°ì • ì •ë³´ë¥¼ ì €ì¥/ì œê³µ
- ë¹„ë°€í‚¤ë¡œ ì•”í˜¸í™”í•˜ì—¬ ì•ˆì „
- íƒˆì·¨ë‹¹í•˜ë©´ ë¬¸ì œ. ë”°ë¼ì„œ ìœ íš¨ê¸°ê°„ì„ ë‘ì–´ì•¼í•˜ëŠ”ë° ì´ëŠ” ì‚¬ìš©ì ê²½í—˜ì— ì¢‹ì§€ ì•Šë‹¤
- ì´ì— ëŒ€í•œ í•´ê²°ë°©ì•ˆìœ¼ë¡œ ìœ íš¨ê¸°ê°„ì´ ë‹¤ë¥¸ í† í° 2ê°œë¥¼ ë‘”ë‹¤ (access token & refresh token)
- ì•¡ì„¸ìŠ¤ í† í°/ë¦¬í”„ë ˆì‰¬ í† í°ì€ ë³´ì•ˆì„±, ì„±ëŠ¥, ì‚¬ìš©í¸ì˜ì„± ë“±ë“±ì„ ì ì ˆí•˜ê²Œ íƒ€í˜‘í•œ ê²°ê³¼

- **ë‘ í† í°ì˜ ì°¨ì´**
    - `Access Token`
        - **ìœ íš¨ê¸°ê°„ì€**Â **ì§§ë‹¤**. (ex. 60ì¼([ë§ˆì´í¬ë¡œì†Œí”„íŠ¸](https://learn.microsoft.com/en-us/linkedin/shared/authentication/programmatic-refresh-tokens)), 1ì‹œê°„([ì•„ë§ˆì¡´](https://developer.amazon.com/docs/login-with-amazon/access-token.html))) â†’ íƒˆì·¨ìœ„í—˜ ë†’ìŒ
        - ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ì‹¤ì œ ì ‘ê·¼ ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ì—­í• 
        - ì£¼ì²´(subject)ê°€ ì„¤ì •ë˜ì–´ ì‚¬ìš©ìì˜ ê¶Œí•œ ì •ë³´(claim)ì„ ê°€ì§€ê³  ìˆìŒ
    - `Refresh Token`
        - **ìœ íš¨ê¸°ê°„ì€**Â **ê¸¸ë‹¤**. (ex. 1ë…„ ([ë§ˆì´í¬ë¡œì†Œí”„íŠ¸](https://learn.microsoft.com/en-us/linkedin/shared/authentication/programmatic-refresh-tokens)))
        - AccessTokenì´ ë§Œë£Œë  ë•Œ ìƒˆë¡œìš´ AccessTokenì„ ì–»ê¸° ìœ„í•´ ì‚¬ìš©
        - ì‚¬ìš©ì ì¸ì¦ ì •ë³´ê°€ ë“¤ì–´ê°ˆ ìˆ˜ëŠ” ìˆìœ¼ë‚˜ ê¶Œí•œ ì •ë³´ëŠ” í•„ìš”í•˜ì§€ ì•ŠìŒ

- **ê³¼ì •**
    - ë¡œê·¸ì¸ ì„±ê³µí•˜ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ë‘ í† í°ì„ ì„œë²„ë¡œë¶€í„° ë°›ì•„ì„œ ë¡œì»¬ì— ì €ì¥í•´ë‘”ë‹¤
    - API ìš”ì²­ì„ í•  ë–„ í—¤ë”ì— `Access Token` (AT) ë„£ê³  ìš”ì²­
    - ë§Œì•½ ìœ íš¨ê¸°ê°„ì´ ë§Œë£Œë˜ë©´ 401 ì—ëŸ¬ (Unauthorized)
    - ê·¸ëŸ¬ë©´ `Refresh Token` (RT)ë„£ì–´ì„œ ì¬ìš”ì²­
    - ì—¬ê¸°ì„œë„ 401 ì—ëŸ¬ ëœ¨ë©´ ì¬ë¡œê·¸ì¸ í•˜ë©´ ë¨
    - **`accessToken`ì˜ ìœ íš¨ê¸°ê°„ì´ ëë‚˜ë©´, `refreshToken`ì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ `accessToken`ì„ ë°œê¸‰ë°›ìŒ**
- **ì›ë¦¬**
    - í†µì‹ ì´ ë¹ˆë²ˆí•œ AT íƒˆì·¨ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤
    - í•˜ì§€ë§Œ ì´ëŠ” ì„±ê³µí•´ë„ ë§Œë£Œì‹œê°„ì´ ì§§ì•„ íƒˆì·¨ìëŠ” ë‹¤ì‹œ íƒˆì·¨ ì‹œë„í•´ì•¼
    - JWT Token ë§Œë£Œì‹œê°„ì€ ë³€ê²½ ë¶ˆê°€ëŠ¥
        
        JWT í† í° êµ¬ì¡°ë¥¼ ë‹¤ì‹œ ìƒê°í•´ë³´ë©´ Header, Payload, Signatureë¡œ ë˜ì–´ìˆë‹¤. ë§Œë£Œ ê¸°ê°„ì€ Payloadì— ì í˜€ìˆê³ , SignatureëŠ” Header+Payloadë¥¼ ë¹„ë°€í‚¤ë¡œ ì•”í˜¸í™”í•œ ê²ƒì´ë‹¤. íƒˆì·¨ìëŠ” í† í°ì€ ê³„ì† ì‚¬ìš©í•˜ê³  ì‹¶ê¸° ë•Œë¬¸ì— Payloadì— ìˆëŠ” ë§Œë£Œ ê¸°ê°„ì„ ëŠ˜ë¦¬ë ¤ê³  í•  ê²ƒì´ë‹¤. ê·¸ëŸ°ë° Payloadì˜ ë§Œë£Œê¸°ê°„ì„ ë°”ê¾¼ë‹¤ê³  í•´ì„œ Signatureê°€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤. Signatureì—ì„œ ë³µí˜¸í™”í•œ Payloadì™€ ë³€ê²½ëœ Payloadê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë¹„ë°€í‚¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì„œë²„ëŠ” ì•Œ ìˆ˜ ìˆê³ , ì ‘ê·¼ ê¶Œí•œì„ ë‚´ì–´ì£¼ì§€ ì•Šê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.
        
- **RT íƒˆì·¨ ìœ„í—˜**
    - [OAuth](https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/)ì—ì„œëŠ”Â **Refresh Token Rotation**ì„ ì œì‹œ
    - í´ë¼ì´ì–¸íŠ¸ê°€ Access Tokenë¥¼ ì¬ìš”ì²­í•  ë•Œë§ˆë‹¤ Refresh Tokenë„ ìƒˆë¡œ ë°œê¸‰ë°›ëŠ” ê²ƒ
    - ì´ë ‡ê²Œ ë˜ë©´ RTë„ ë§Œë£Œê¸°ê°„ì´ ì§§ê²Œ ëœë‹¤

### Refresh Token

[https://hudi.blog/refresh-token/](https://hudi.blog/refresh-token/)

- JWT ì¼ìˆ˜ë„, ê°„ë‹¨í•œ UUIDì¼ìˆ˜ë„ ìˆë‹¤
- JWT
    - access tokenê³¼ ê°™ì´ statelessí•˜ê³  í† í° ìì²´ì— ë°ì´í„°ë¥¼ ë‹´ì„ ìˆ˜ ìˆê³  DBì— ë³„ë„ë¡œ ì•¡ì„¸ìŠ¤í•˜ì§€ ì•Šì•„ë„ ëœë‹¤
    - ê·¸ëŸ¬ë‚˜ access tokenê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì„œë²„ì—ì„œ refresh tokenì„ ì œì–´í•  ë°©ë²•ì´ ì—†ë‹¤ (íƒˆì·¨ì‹œ ë¬´íš¨í™”í•  ìˆ˜ ì—†ìŒ)
- UUID
    - ì‚¬ìš©ìì™€ ë§¤í•‘ë˜ë„ë¡ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ í•„ìš” â†’ DB access
    - ëŒ€ì‹  ì‚¬ìš©ìë¥¼ ê°•ì œ ë¡œê·¸ì•„ì›ƒ ì‹œí‚¤ê±°ë‚˜ ì°¨ë‹¨ ê°€ëŠ¥í•˜ë©° refresh token íƒˆì·¨ì‹œ ë°”ë¡œ ë¬´íš¨í™” ê°€ëŠ¥

- ****RTR (Refresh Token Rotation)****
    - Refresh tokenì„ í•œë²ˆë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
    - ìƒˆë¡œìš´ access tokenì„ ë°œê¸‰ ë°›ì„ ë•Œ refresh tokenë„ ìƒˆë¡­ê²Œ ë°œê¸‰ ë°›ë„ë¡ í•¨
    - ì´ë¯¸ ì‚¬ìš©ëœ refresh tokenì„ ì‚¬ìš©í–ˆì„ ë•Œ íƒˆì·¨ë¥¼ í™•ì¸í•˜ê³  ì¡°ì¹˜í•  ìˆ˜ ìˆìŒ
    - í•˜ì§€ë§Œ ì‚¬ìš©ë˜ì§€ ì•Šì€ tokenì„ í›”ì¹˜ê±°ë‚˜, ì§€ì†ì ìœ¼ë¡œ access tokenì„ íƒˆì·¨í•˜ëŠ” ë°©ë²•ì€ ë§‰ì„ ìˆ˜ ì—†ìŒ

- **Refresh Tokenì˜ í•œê³„**
    - access token ì„ ì¦‰ì‹œ ì°¨ë‹¨í•  ë°©ë²•ì´ ì—†ë‹¤
    - refresh token ìì²´ë¥¼ íƒˆì·¨ë‹¹í•  ì‹œ ì™„ì „íˆ ë§‰ì„ ë°©ë²•ì´ ì—†ë‹¤
    - ê·¸ë ‡ë‹¤ê³  access tokenì„ ì„œë²„ì—ì„œ ì§ì ‘ ê´€ë¦¬í•˜ì—¬ refresh tokenì„ ì‚¬ìš© ì•ˆí•˜ëŠ” ìˆœê°„ statelessí•œ íŠ¹ì„±ì„ í¬ê¸°í•˜ëŠ” ê²ƒìœ¼ë¡œ ì„¸ì…˜ê³¼ ë‹¬ë¼ì§ˆê²Œ ì—†ë‹¤.

### Stateful vs Stateless

[https://sjh9708.tistory.com/86](https://sjh9708.tistory.com/86)

- **stateless**
    - ê°„ë‹¨í•˜ê³  ë¹ ë¥¸ ì¸ì¦ (state ê´€ë¦¬ X, DB ì‚¬ìš© X)
    - JWT ì¥ì  í™œìš© â†’ ë°ì´í„° í¬ê¸° ì‘ìŒ, í´ë¼ì´ì–¸íŠ¸ ì €ì¥, í™•ì¥ ìš©ì´
    - ê¸°ê¸° ì‹ë³„ ì–´ë ¤ì›€
- **stateful**
    - ê¸°ê¸°ì‹ë³„ ì‰¬ì›€
    - ì„œë²„ ë¶€í•˜ ì¦ê°€
    - ì„œë²„ í™•ì¥ ì–´ë ¤ì›€, ì¼ê´€ì„± ìœ ì§€ ë…¸ë ¥ í•„ìš”

[https://engineerinsight.tistory.com/232](https://engineerinsight.tistory.com/232)

- **ì™„ì „í•œ Statelessë¡œëŠ” ì•ˆì „í•œ ë¡œê·¸ì•„ì›ƒì„ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤**
- **ì™„ì „í•œ Statelessë¡œëŠ” Refresh Tokenì„ í†µí•œ Access Token ì¬ë°œê¸‰ì„ êµ¬í˜„í•  ìˆ˜ ì—†ë‹¤.**
    - ê·¸ëŸ¬ë‚˜ ë¸”ë™ë¦¬ìŠ¤íŠ¸ì— access tokenì„ DBì— ì €ì¥í•œë‹¤ë©´, ê·¸ëƒ¥ ì„¸ì…˜ê³¼ í¬ê²Œ ì°¨ì´ê°€ ì—†ëŠ”ë°?
    - refresh tokenë§Œ ì €ì¥í•œë‹¤ë©´ ì´ì ì´ ìˆë‹¤.
    - access token ë¬´íš¨í™” ë¶€í•˜ >> refresh token ë¬´íš¨í™” ë¶€í•˜

### Session vs JWT

- ìµœì´ˆì˜ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ
    - ì„¸ì…˜ ë°©ì‹ì—ì„œ ì„œë²„ëŠ” ì„¸ì…˜ DBì— ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì €ì¥í•˜ê³ , ìƒì„±ëœ ì„¸ì…˜ IDë¥¼ (ì¼ë°˜ì ìœ¼ë¡œ) ì¿ í‚¤ì— ë„£ì–´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œë‹¤.
    - JWT ë°©ì‹ì—ì„œ ì„œë²„ëŠ” ì‚¬ìš©ìì˜ ì •ë³´ ê°€ìš´ë° ë¯¼ê° ì •ë³´ê°€ ì•„ë‹Œ ì •ë³´ë¡œÂ **JWT ì•Œê³ ë¦¬ì¦˜ì„ êµ´ë ¤ì„œ**Â í† í°ì„ ìƒì„±í•´ í´ë¼ì´ì–¸íŠ¸ì— ë°˜í™˜í•œë‹¤.
- ë¡œê·¸ì¸ ì„±ê³µ ì´í›„ì˜ ëª¨ë“  ìš”ì²­ ì‹œ
    - ì„¸ì…˜ ë°©ì‹ì—ì„œ í´ë¼ì´ì–¸íŠ¸ëŠ” ì„¸ì…˜ IDë¥¼ í¬í•¨í•œ ì¿ í‚¤ë¥¼ ì„œë²„ì— ì „ë‹¬í•˜ê³ , ì„œë²„ëŠ” ì¿ í‚¤ì—ì„œ ì„¸ì…˜ IDë¥¼ êº¼ë‚´, ì„¸ì…˜ DBì— í•´ë‹¹ ì•„ì´ë””ì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€ ì¡°íšŒí•˜ê³ , ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë¡œê·¸ì¸ì´ ë˜ì–´ìˆì§€ ì•Šë‹¤ê³  íŒë‹¨í•œë‹¤.
    - JWT ë°©ì‹ì—ì„œ ì„œë²„ëŠ” **ì„œëª… ë¶€ë¶„ì„ í™•ì¸í•´Â JWT ì•Œê³ ë¦¬ì¦˜ì„ êµ´ë ¤ì„œÂ í•´ë‹¹ í† í°ì´ ì¡°ì‘ë˜ì—ˆëŠ”ì§€ íŒë³„í•˜ê³ , ì¡°ì‘ë˜ì§€ ì•Šì•˜ë‹¤ë©´Â JWT ì•Œê³ ë¦¬ì¦˜ì„ êµ´ë ¤Â í† í°ìœ¼ë¡œë¶€í„° ì‚¬ìš©ìì˜ ì•„ì´ë””ì™€ ê°™ì´ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ êº¼ë‚´ì„œ ì‚¬ìš©**í•œë‹¤.
        - ìœ„ì˜ ì„¤ëª…ì—ì„œ JWT ë°©ì‹ì€ ë‹¨ í•œ ë²ˆë„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•œë‹¤ê±°ë‚˜, ì¡°íšŒí•œë‹¤ëŠ” ê³¼ì •ì´ í¬í•¨ë˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

- `ë¡œê·¸ì¸ ì„±ê³µ ì‹œ`
    - **ì„¸ì…˜ ë°©ì‹**: ì—¬ì „íˆ ì„¸ì…˜ DBì— ì ‘ê·¼í•´ ìœ ì € ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ì„¸ì…˜ IDë¥¼ ë°˜í™˜ ë°›ì•„ì•¼ í•œë‹¤.
    - **JWT ë°©ì‹**: DBì— ì ‘ê·¼í•  í•„ìš” ì—†ì´ í† í°ë§Œ ë°œê¸‰í•˜ë©´ ëœë‹¤.
- `ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆëŠ” ê²½ìš°`
    - **ì„¸ì…˜ ë°©ì‹**: ëŠ˜ ì„¸ì…˜ IDê°€ ìœ íš¨í•œì§€ DBë¥¼ ì¡°íšŒí•´ì•¼ í•œë‹¤.
    - **JWT ë°©ì‹**: DBì— ë³„ë„ë¡œ ì¡°íšŒí•  í•„ìš” ì—†ì´, ì„œëª…ë§Œ í™•ì¸í•´ì„œ í† í°ì´ ì¡°ì‘ë˜ì§€ ì•Šì•˜ëŠ”ì§€ë§Œ í™•ì¸í•˜ë©´ ëœë‹¤.
- `ë¡œê·¸ì•„ì›ƒ ì‹œ`
    - **ì„¸ì…˜ ë°©ì‹**: ì„¸ì…˜ DBì—ì„œ í•´ë‹¹ ì„¸ì…˜ IDì— í•´ë‹¹í•˜ëŠ” ë ˆì½”ë“œë¥¼ ì‚­ì œí•´ì•¼ í•œë‹¤
    - **JWT ë°©ì‹: DBì˜ ë¸”ë™ë¦¬ìŠ¤íŠ¸ í…Œì´ë¸”ì— ë¡œê·¸ì•„ì›ƒí•œ ê³„ì •ì˜ Refresh Tokenì„ ì €ì¥í•˜ë©´ ëœë‹¤.**

### ì´ì— ë”°ë¥¸ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ êµ¬í˜„ ë°©ë²•

1. **ì™„ì „í•œ Stateless Pure JWT**
    - DB X
2. **Access Token ë§Œë£Œì‹œê°„ ì§§ê²Œ + RefreshToken BlackList ì €ì¥ (í˜¹ì€ Redisì—ì„œ ë³´ê´€í•˜ê³  ìˆë‹¤ê°€ ì‚­ì œ)**
    - ë¡œê·¸ì•„ì›ƒ ì‹œì—ë§Œ DB
3. **Access Token & RefreshToken ëª¨ë‘ BlackList ì €ì¥**
    - ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ë‹¤ë¥¸ ìš”ì²­ ëª¨ë‘ DB
4. **ê·¸ëƒ¥ ì„¸ì…˜ ì‚¬ìš©**
    - ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ë‹¤ë¥¸ ìš”ì²­ ëª¨ë‘ DB

- **ì™œ UsernamePasswordAuthenticationTokenì˜ credentialsê°€ ë¹ˆì¹¸ì¸ê°€?**
    
    **`UsernamePasswordAuthenticationToken`** ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, ë³´í†µ ì‹¤ì œë¡œ ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ **`credentials`**ì— ë„£ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ë³´ì•ˆ ìƒì˜ ì´ìœ ë¡œ, ì‹¤ì œ íŒ¨ìŠ¤ì›Œë“œë¥¼ ë©”ëª¨ë¦¬ì— ì˜¤ë˜ ì €ì¥í•˜ì§€ ì•Šê³ , í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ëŠ” ëŒ€ê°œëŠ” **`UserDetails`** ê°ì²´ì— ë‹´ê²¨ ìˆê³ , **`credentials`**ì—ëŠ” ë¹ˆ ë¬¸ìì—´ì´ë‚˜ ë‹¤ë¥¸ ê°’ì„ ë„£ì–´ë‘ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
    
    ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ **`credentials`**ì— ë„£ì§€ ì•Šì•„ë„ ì‚¬ìš©ìì˜ ì¸ì¦ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì™œëƒí•˜ë©´ **`UsernamePasswordAuthenticationToken`**ì´ë‚˜ ë‹¤ë¥¸ **`Authentication`** êµ¬í˜„ì²´ëŠ” ì£¼ë¡œ **`Principal`** ê°ì²´ì™€ **`Authorities`** ì •ë³´ì— ì¤‘ì ì„ ë‘ê³ , ì‹¤ì œ ë¹„ë°€ë²ˆí˜¸ëŠ” ë”°ë¡œ ë‹¤ë¥¸ ê³³ì—ì„œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ ë¹„ë°€ë²ˆí˜¸ëŠ” ì•ˆì „í•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ë˜ê³ , í•„ìš”í•  ë•Œë§Œ ì¸ì¦ ê³¼ì •ì—ì„œ ì‚¬ìš©ë©ë‹ˆë‹¤.
    

- **Spring Securityì— ëŒë‹¤ì‹ ì ìš© í•„ìˆ˜**
    - **ì¤‘ì²©ì— ë”°ë¥¸ ê°€ë…ì„± ì´ìŠˆ & ëŒë‹¤ì‹/ì²´ì´ë‹ 2ê°€ì§€ ì½”ë“œ ì¤‘ë³µì„ í”¼í•˜ê³  ì¼ê´€ì„± ìœ ì§€ë¥¼ ìœ„í•´**

> The Lambda DSL is the preferred way to configure Spring Security, the prior configuration style will not be valid in Spring Security 7 where the usage of the Lambda DSL will be required. This has been done mainly for a couple of reasons:
> 
> - The previous way it was not clear what object was getting configured without knowing what the return type was. The deeper the nesting the more confusing it became. Even experienced users would think that their configuration was doing one thing when in fact, it was doing something else.
> - Consistency. Many code bases switched between the two styles which caused inconsistencies that made understanding the configuration difficult and often led to misconfigurations.

**SecurityBuilder**

```java
@Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        return http    // REST APIì´ë¯€ë¡œ basic auth ë° csrf ë³´ì•ˆì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
                .httpBasic(AbstractHttpConfigurer::disable)
                .csrf(AbstractHttpConfigurer::disable)
                // JWTë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì„¸ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
                .sessionManagement(sm -> sm
                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(authorize -> authorize
                        // í•´ë‹¹ APIì— ëŒ€í•´ì„œëŠ” ëª¨ë“  ìš”ì²­ì„ í—ˆê°€
                        .requestMatchers("/member").permitAll()
                        .requestMatchers("/member/login").permitAll()
                        // USER ê¶Œí•œì´ ìˆì–´ì•¼ ìš”ì²­í•  ìˆ˜ ìˆìŒ
                        .requestMatchers("/member/test").hasRole("USER")
                        // ì´ ë°–ì— ëª¨ë“  ìš”ì²­ì— ëŒ€í•´ì„œ ì¸ì¦ì„ í•„ìš”ë¡œ í•œë‹¤ëŠ” ì„¤ì •
                        .anyRequest().authenticated())
                // ì—ëŸ¬ í•¸ë“¤ë§
               .exceptionHandling(ex ->
                        ex.authenticationEntryPoint(jwtAuthenticationEntryPoint)
                        .accessDeniedHandler(jwtAccessDeniedHandler))
                // JWT ì¸ì¦ì„ ìœ„í•˜ì—¬ ì§ì ‘ êµ¬í˜„í•œ í•„í„°ë¥¼ UsernamePasswordAuthenticationFilter ì „ì— ì‹¤í–‰
                .addFilterBefore(new JwtAuthenticationFilter(jwtTokenProvider), UsernamePasswordAuthenticationFilter.class).build();
    }
```

- **HttpSecurity**
    - [https://kimchanjung.github.io/programming/2020/07/02/spring-security-02/](https://kimchanjung.github.io/programming/2020/07/02/spring-security-02/)
    - **ìŠ¤í”„ë§ ì‹œíë¦¬í‹°ì˜ ì„¤ì •ì„ í•˜ê¸° ìœ„í•œ ê°ì²´**
    - ë¦¬ì†ŒìŠ¤(URL) ì ‘ê·¼ ê¶Œí•œ ì„¤ì •
    - ì¸ì¦ ì „ì²´ íë¦„ì— í•„ìš”í•œ Login, Logout í˜ì´ì§€ ì¸ì¦ì™„ë£Œ í›„ í˜ì´ì§€ ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì´ë™í˜ì´ì§€ ë“±ë“± ì„¤ì •
    - ì¸ì¦ ë¡œì§ì„ ì»¤ìŠ¤í…€í•˜ê¸°ìœ„í•œ ì»¤ìŠ¤í…€ í•„í„° ë“±ë¡ & ì„¤ì •
        - íŠ¹ì • ìœ„ì¹˜ì— ì»¤ìŠ¤í…€ í•„í„°ë¥¼ ë„£ì–´ì¤„ ìˆ˜ ìˆìŒ
    - ê¸°íƒ€ csrf, ê°•ì œ https í˜¸ì¶œ ë“±ë“± ê±°ì˜ ëª¨ë“  ìŠ¤í”„ë§ì‹œíë¦¬í‹°ì˜ ì„¤ì •
- WebSecurity
    - **HttpSecurity ìƒìœ„**
    - ì˜ì€ ëª¨ë¥´ê² ìŒ ì•„ì§

## opensslì´ë€?

- SSL
    - http í†µì‹ ì„ ì•ˆì „í•˜ê²Œ í•˜ê¸° ìœ„í•œ í”„ë¡œí† ì½œ
    - ì•”í˜¸í™” í†µì‹ ì„ ìœ„í•œ ëŒ€ì¹­í‚¤, ë¹„ëŒ€ì¹­í‚¤ ì‚¬ìš©
    - sshì™€ ê±°ì˜ ê°™ì€ ë°©ì‹ì´ë‚˜ ë””ì§€í„¸ ì¸ì¦ì„œê°€ í•„ìš”
- opsnsslì€ ë°ì´í„° í†µì‹ ì„ ìœ„í•œ TLS, SSL í”„ë¡œí† ì½œì„ ì´ìš©í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬

### ì°¸ê³  ë¸”ë¡œê·¸

Spring Security + JWT

[https://suddiyo.tistory.com/entry/Spring-Spring-Security-JWT-ë¡œê·¸ì¸-êµ¬í˜„í•˜ê¸°-2](https://suddiyo.tistory.com/entry/Spring-Spring-Security-JWT-%EB%A1%9C%EA%B7%B8%EC%9D%B8-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-2)

[https://velog.io/@limsubin/Spring-Security-JWT-ì„-êµ¬í˜„í•´ë³´ì](https://velog.io/@limsubin/Spring-Security-JWT-%EC%9D%84-%EA%B5%AC%ED%98%84%ED%95%B4%EB%B3%B4%EC%9E%90)

RefreshToken ì‚¬ìš© 

[https://engineerinsight.tistory.com/278](https://engineerinsight.tistory.com/278)

# With Redis

ê°€ì¥ í° ì´ìœ ëŠ” RedisëŠ” TTL(Time-To-Live) ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ì˜ ë§Œë£Œ ì‹œê°„ì„ ì„¤ì •í•  ìˆ˜ ìˆê¸° ë•Œë¬¸

**ì„œë²„ì— ì €ì¥í•  Refresh Tokenì˜ ë§Œë£Œ ì‹œê°„ì„ ì‰½ê²Œ ì„¤ì •**

[https://9keyyyy.tistory.com/48](https://9keyyyy.tistory.com/48)

[https://velog.io/@backtony/Spring-Redis-ì—°ë™í•˜ê¸°](https://velog.io/@backtony/Spring-Redis-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0)

[https://sjh9708.tistory.com/86](https://sjh9708.tistory.com/86)

[https://velog.io/@wisdom-one/Spring-Bootì™€-Redis-ê°„ë‹¨í•˜ê²Œ-ì—°ë™í•˜ê¸°](https://velog.io/@wisdom-one/Spring-Boot%EC%99%80-Redis-%EA%B0%84%EB%8B%A8%ED%95%98%EA%B2%8C-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0)

```java
@RequiredArgsConstructor
@Configuration
@EnableRedisRepositories
public class RedisConfig {
    private final RedisProperties redisProperties;

    // RedisPropertiesë¡œ yamlì— ì €ì¥í•œ host, portë¥¼ ì—°ê²°
    @Bean
    public RedisConnectionFactory redisConnectionFactory() {
        return new LettuceConnectionFactory(redisProperties.getHost(), redisProperties.getPort());
    }

    // serializer ì„¤ì •ìœ¼ë¡œ redis-clië¥¼ í†µí•´ ì§ì ‘ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
		// ì•„ë‹ˆë©´ key, value ëª¨ë‘ byte[]ë¡œ í•´ì•¼í•¨
    @Bean
    public RedisTemplate<String, Object> redisTemplate() {
        **RedisTemplate<String, Object> redisTemplate = new RedisTemplate<>();**
        **redisTemplate.setKeySerializer(new StringRedisSerializer());
        redisTemplate.setValueSerializer(new StringRedisSerializer());**
        redisTemplate.setConnectionFactory(redisConnectionFactory());
        return redisTemplate;
    }
}
```

[https://kobumddaring.tistory.com/61](https://kobumddaring.tistory.com/61)\

### Why Redis?

- **ë¡œê·¸ì¸** (accessTokenì„ ë°œê¸‰ ë°›ê³ , **refreshTokenì„ Redisì— ì €ì¥**í•˜ê¸° ìœ„í•´)
- **ë¡œê·¸ì•„ì›ƒ (accessTokenì˜ ë‚¨ì€ ìœ íš¨ê¸°ê°„ ë™ì•ˆ redisì— logoutAccessTokenì„ ì €ì¥**í•˜ì—¬ í•´ë‹¹ í† í°ìœ¼ë¡œ ì ‘ê·¼ í•˜ëŠ” ê²ƒì„ ê¸ˆì§€ì‹œí‚¤ê¸°)
- **í† í° ì¬ë°œê¸‰** (í† í°ì€ ìœ íš¨ ê¸°ê°„ì´ ìˆê¸° ë•Œë¬¸ì—, ê¸°ê°„ì´ ì§€ë‚¬ì„ ê²½ìš°ë¥¼ ìœ„í•´ redisì— ì €ì¥í•œ refreshTokenì˜ ë‚¨ì€ ë§Œë£Œ ê¸°ê°„ì— ë”°ë¼ accessTokenê³¼ refreshToken ë‘ ê°œ ëª¨ë‘ í˜¹ì€ accessTokenë§Œ ì¬ë°œê¸‰í•˜ê¸° ìœ„í•´)

# ğŸ˜œÂ Todayâ€™s Small Happiness

# ğŸ§Â Letâ€™s Think About It

# ğŸ™€Â Got Stuck..