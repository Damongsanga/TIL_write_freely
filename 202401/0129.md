# TIL (Today I Learned)

# 1ì›” 29ì¼ ì›”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## í”„ë¡œì íŠ¸ 16ì¼ì°¨

### ì§„í–‰ ë‚´ìš©

### ì˜¤ëŠ˜ í•œ ë‚´ìš©

- [x]  URL ë° HTTP Method ìˆ˜ì •
    1. Soft Delete ë„ ëª¨ë‘ Patch -> Deleteë¡œ ë©”ì„œë“œ ìˆ˜ì •í•˜ê³  URLì— delete ë‚´ìš© ìˆ˜ì •
        
        Follow, unfollowë¡œ ë‚˜ëˆ„ì§€ ë§ê³  member/follow ë¡œ ë™ì¼í•˜ê²Œ í•˜ê¸°
        
        /delete url ëª¨ë‘ ìˆ˜ì •í•˜ê¸°
        
    2. ë°ì´í„° ìˆ˜ì • ì‹œ ë‚˜ëŠ” ëª¨ë“  ë°ì´í„° ì •ë³´ ê°’ì„ ìš”ì²­í•  ê±´ë°.. ì´ëŸ¬ë©´ PUTì„ ì‚¬ìš©í•˜ëŠ”ê²Œ ë§ì§€ ì•ŠëŠ”ê°€? â†’ PATCHë¡œ ê·¸ëŒ€ë¡œ ê°€ê³  ë°± ë¡œì§ì„ ë§ì¶°ì„œ ìˆ˜ì •
    3. ResponseE]ntity<Slice<RoomSearchResponseDto>> search POSTë¡œ ìˆ˜ì • (íŒŒë¼ë¯¸í„° ìˆ˜ê°€ ë„ˆë¬´ ë§ìŒ) â†’ GET ê·¸ëŒ€ë¡œ ê°€ì•¼í•¨ ã… 
- [x]  Refactoring
    - [x]  DTO & SERVICE ë“± convention í†µì¼
    - [x]  PATCH â†’ DELETE & URL ìˆ˜ì •
    - [x]  UPDATE if not nullë¡œ ì „ë¶€ ìˆ˜ì •
    - [x]  ResponseE]ntity<Slice<RoomSearchResponseDto>> search ì´ê±° @RequestParamìœ¼ë¡œ ìˆ˜ì • â†’ ì•ˆí•¨. @RequestBodyì—ì„œ @Validë¡œë§Œ ë°›ë„ë¡ ë³€ê²½
    - [x]  @Where Entityì— ì ìš©í•˜ê³  findByIdAndIsDeletedFalse ì „ë¶€ findByIdë¡œ ìˆ˜ì •í•˜ê¸°
        - [x]  SQLRestriction ëŒ€ì‹  ì ìš© (@Where 6.3 Deprecated)
    - [x]  EnterRoomì— Keywordë„ ì¶”ê°€
    - [x]  service ë‹¨ì—ì„œ methodëª… ì‹¬í”Œí•˜ê²Œ
    - [x]  reqMemberId ê¼­ í•„ìš”í•œê±°ë§Œ
    - [x]  ë§¤ê°œë³€ìˆ˜ dto > reqë¡œ ì „ë¶€ ë°”ê¾¸ê¸°
    - [x]  @PathVariable long â†’ Longìœ¼ë¡œ ìˆ˜ì •
    - [x]  ResponseEntity.ok() ë°©ì‹ìœ¼ë¡œ ìˆ˜ì • â†’ ì˜¤í”ˆë¹„ë‘ì— í•´ë‹¹ ì»¨ë²¤ì…˜ìœ¼ë¡œ ì•ˆëœ ë¶€ë¶„ ìˆìŒ ìˆ˜ì • ìš”ì²­í•  ê²ƒ
    - [x]  GET ë©”ì„œë“œ @RequestBody ë©”ì„œë“œ ì „ë¶€ ìˆ˜ì •
    - [x]  ì–‘ë°©í–¥ ì‚­ì œ ë©”ì„œë“œ
        
        ```java
        public void delete(){
                deleteSoftly();
                this.getLounges().forEach(Lounge::deleteSoftly);
                this.getChannels().forEach(Channel::deleteSoftly);
                this.getRoomKeywords().forEach(RoomKeyword::deleteSoftly);
                this.getRoomMembers().forEach(RoomMember::deleteSoftly);
                this.lounges = new ArrayList<>();
                this.channels = new ArrayList<>();
                this.roomKeywords = new ArrayList<>();
                this.roomMembers = new ArrayList<>();
            }
        ```
        
    - [x]  POSTMAN ìš”ì²­/ì‘ë‹µ ì‘ì„±
        - [x]  Login
        - [x]  Member
        - [x]  Follow
        - [x]  Til
        - [x]  Room
    

### ë‚´ì¼ í•  ë‚´ìš©

- [ ]  POSTMAN ìš”ì²­/ì‘ë‹µ ì‘ì„±
    - [ ]  Channel
    - [ ]  Lounge
    - [ ]  Keyword
- [ ]  Redis í˜„ì¬ ë°© ì ‘ì† ì¸ì› ê´€ë¦¬ ë¡œì§
- [ ]  ë©”íƒ€ë°ì´í„° ìƒì„±
- [ ]  socket ì‚¬ìš©í•˜ì—¬ ë°© ìˆ˜ì •ì‚¬í•­ì— ëŒ€í•œ ì „ì²´ ì „ì†¡.. í•˜ëŠ” ë²•ì„ í•´ì•¼í•˜ëŠ”ë° ì–´ë–¡í•˜ì§•

## ì˜¤ëŠ˜ ë°°ìš´ ë¶€ë¶„

- **LocalDate Json íŒŒì‹±**
    - ObjectMapper ì»¤ìŠ¤í…€
    
    ```java
    @Configuration
    public class JacksonConfig {
    
        // LocalDateTime í˜•ì‹ì˜ ë°ì´í„°ë¥¼ ObjectMapperì˜ writeValueAsString() ë©”ì„œë“œë¥¼ í†µí•´ ì§ë ¬í™” ì—ëŸ¬ í•´ê²°ì„ ìœ„í•´ ì„¤ì •
        @Bean
        public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {
            return new Jackson2ObjectMapperBuilder()
                    .featuresToDisable(com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)
                    .findModulesViaServiceLoader(true)
                    .simpleDateFormat("yyyy-MM-dd");
        }
    
        @Bean
        public ObjectMapper objectMapper(Jackson2ObjectMapperBuilder builder) {
            ObjectMapper objectMapper = builder.createXmlMapper(false).build();
            objectMapper.registerModule(new ParameterNamesModule());
            objectMapper.registerModule(new JavaTimeModule());
            objectMapper.registerModule(new SimpleModule());
            return objectMapper;
        }
    }
    ```
    
    - Return ê°’ì— ì§ë ¬í™” ë˜ë„ë¡ @JsonSerialize ì–´ë…¸í…Œì´ì…˜
    
    ```java
    @Getter
    @NoArgsConstructor
    public class TilListResponseDto {
    
        private List<TilContentResponseDto> content = new ArrayList<>();
    
        public void of(Long id, LocalDate date){
            this.content.add(new TilContentResponseDto(id, date));
        }
    
        @JsonSerialize
        @Getter
        public static class TilContentResponseDto implements Comparable<TilContentResponseDto> {
            private Long id;
            private LocalDate date;
    
            public TilContentResponseDto(Long id, LocalDate date) {
                this.id = id;
                this.date = date;
            }
    
            @Override
            public int compareTo(TilContentResponseDto o) {
                return date.compareTo(o.date);
            }
    
        }
    
    }
    ```
    

- **RequestDtoì— @Setter & @NoArgsConstructor ìˆì–´ì•¼ ê¸°ë³¸ ìƒì„±ìë¡œ ë§Œë“¤ê³  setterë¡œ Parameter Mapping ë¨!**
    
    ```java
    @Getter
    @Setter
    @NoArgsConstructor
    public class TilCreateRequestDto {
    
        @NotNull
        public String context;
    
        @NotNull
        public LocalDate date;
    
        @Builder
        public TilCreateRequestDto(String context, LocalDate date) {
            this.context = context;
            this.date = date;
        }
    }
    ```
    

## ê³µë¶€í•œ ë‚´ìš©

## Base64 ì¸ì½”ë”©ì´ë€?

- **Binary Dataë¥¼ Textë¥¼ ë°”ê¾¸ëŠ” ì¸ì½”ë”©**
- Character setì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ” ê³µí†µ ASCII ì˜ì—­ì˜ ë¬¸ìë¡œë§Œ ì´ë£¨ì–´ì§„ ë¬¸ìì—´ë¡œ ë°”ê¾¸ëŠ” ì¸ì½”ë”©
- 64ì§„ë²•ìœ¼ë¡œ, binary dataë¥¼ 6ë¹„íŠ¸ì”© ì˜ë¼ì„œ 6bitì— í•´ë‹¹í•˜ëŠ” ë¬¸ìë¥¼ Base64 ìƒ‰ì¸í‘œì—ì„œ ì°¾ì•„ ì¹˜í™˜ + Padding
- Padding?
    - ë‚¨ëŠ” ê³µê°„ì„ 0ìœ¼ë¡œ ì±„ì›Œ 6ë¹„íŠ¸ ë‹¨ìœ„ë¡œ ë§Œë“œëŠ” ê²ƒìœ¼ë¡œ ë¹ˆê³µê°„ - ì€ ì¸ì½”ë”©ì‹œ **=**ì´ ëœë‹¤
- **ì „ì†¡í•´ì•¼ í•  ë°ì´í„°ì˜ ì–‘ì´ 33% ì¦ê°€í•˜ëŠ”ë° ì´ëŠ” 6bitë‹¹ 2bitì˜ Overheadê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤**
    - ë¬´ìŠ¨ ëœ»ì´ëƒë©´ ë°ì´í„°ëŠ” í•­ìƒ 8bit (1Byte) ë‹¨ìœ„ë¡œ ì™„ì„±ë˜ì–´ì•¼ í•˜ê¸° ë•Œë¬¸

- ì™œ ì‚¬ìš©í•˜ëŠ”ê°€?
    - í”Œë«í¼ ë…ë¦½ì ìœ¼ë¡œ binary data(ì´ë¯¸ì§€ë‚˜ ì˜¤ë””ì˜¤)ë¥¼ ì „ì†¡í•  í•„ìš”ê°€ ìˆì„ ë•Œ, **ASCIIë¡œ ì¸ì½”ë”©í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ ASCII(7 bit)ì˜ ë‚¨ì€ 1 bitë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²• & ì¼ë¶€ ì œì–´ë¬¸ìë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì´ ì‹œìŠ¤í…œ ë³„ë¡œ ìƒì´**í•˜ë‹¤
    - ***Base64ëŠ” HTML ë˜ëŠ” Emailê³¼ ê°™ì´ ë¬¸ìë¥¼ ìœ„í•œ Mediaì— Binary Dataë¥¼ í¬í•¨í•´ì•¼ ë  í•„ìš”ê°€ ìˆì„ ë•Œ, í¬í•¨ëœ Binary Dataê°€ ì‹œìŠ¤í…œ ë…ë¦½ì ìœ¼ë¡œ ë™ì¼í•˜ê²Œ ì „ì†¡ ë˜ëŠ” ì €ì¥ë˜ëŠ”ê±¸ ë³´ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤***

[https://effectivesquid.tistory.com/entry/Base64-ì¸ì½”ë”©ì´ë€](https://effectivesquid.tistory.com/entry/Base64-%EC%9D%B8%EC%BD%94%EB%94%A9%EC%9D%B4%EB%9E%80)

# ğŸ˜œÂ Todayâ€™s Small Happiness

- ì˜¤ëŠ˜ ë‚´ì¼ì€ ì¢€ ë‡Œë¹¼ê³  ë‹¨ìˆœ ì½”ë”©í•˜ëŠ” ë‚ ì¼ë“¯
- ìš´ë™ë„ í•˜ê³  ì•¼ì‹ë„ ë¨¹ê³  í•´í”¼í•´í”¼!!

# ğŸ§Â Letâ€™s Think About It

# ğŸ™€Â Got Stuck..