# TIL (Today I Learned)

# 2ì›” 27ì¼ í™”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©

## âœ¨ì˜¤ëŠ˜ ì§„í–‰í•œ ë‚´ìš©

- ê¸°ëŠ¥ íšŒì˜ ë° risk inspection
- virtual boxë¥¼ ì„¤ì¹˜í•˜ì˜€ìœ¼ë‚˜.. ì˜ ì‘ë™ ì•ˆí•¨
- ê·¸ëƒ¥ aws í”„ë¦¬í‹°ì–´ì—ì„œ swap ë©”ëª¨ë¦¬ ëŠ˜ë ¤ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²• ì ìš©í•¨
    
    ```bash
    $ docker run -it -v /var/run/docker.sock:/var/run/docker.sock docker
    ```
    
- jenkins dood ì„¤ì • ì™„ë£Œ

## âœ¨ë‚´ì¼ í•´ì•¼í•  ê²ƒ

- docker-compose ê°€ ë¬´ì—‡ì¸ì§€ & ì„¤ì • ë°©ë²• ì•Œì•„ë³´ê¸°
- ì»¨í…Œì´ë„ˆ ë§Œë“¤ì–´ì„œspringboot ë§Œë“¤ì–´ì„œ Jenkins ë¡œ ë¹Œë“œ ëŒë ¤ë³´ê¸°
    - [https://seongwon.dev/DevOps/20220717-CICDêµ¬ì¶•ê¸°2/](https://seongwon.dev/DevOps/20220717-CICD%EA%B5%AC%EC%B6%95%EA%B8%B02/)
- Jenikns SSH ì—°ë™í•˜ê¸°

## âœ¨ë°°ìš´ ë‚´ìš©

## CI/CD

- Continuous Integration
- Continuous Delivery
- Continuous Deployment

## VirtualBox

### [ìœˆë„ìš° íŒŒì›Œ ì‰˜](https://www.lainyzine.com/ko/article/how-to-run-windows-terminal-and-powershell-in-administrator-mode/)

### [Hyper-V í™œì„±í™”ë˜ì–´ìˆëŠ”ì§€](https://www.lainyzine.com/ko/article/how-to-disable-hyper-v-in-windows-10/)

- Hyper-VëŠ” ê°€ìƒí™” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì— ì˜í–¥ì„ ë¼ì¹˜ê³ , í•˜ë“œì›¨ì–´ì— ë”°ë¼ì„œ ë§¤ìš° ë¶ˆì•ˆì •í•œ ë™ì‘ì„ ë³´ì´ê¸°ë„ í•©ë‹ˆë‹¤. Hyper-V ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰í•œ Docker Desktopì´ ìì£¼ ì¢…ë£Œë˜ê±°ë‚˜, VirtualBoxì—ì„œ Windows ì„¤ì¹˜ê°€ ì‹¤íŒ¨í•˜ëŠ” ë“±ì˜ ë¬¸ì œê°€ ë°œìƒ
- Dockerì˜ ê²½ìš° Hyper-Vë³´ë‹¤ë„ 2020ë…„ì— ê³µê°œëœ WSL2ì„ ì‚¬ìš©í•˜ëŠ” ê²Œ ì•ˆì •ì ì¸ ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.
- Hyper-Vë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë”ë¼ë„ VirutalBoxë‚˜ VMWareë¡œ ê°€ìƒ ë¨¸ì‹ ì„ ì‚¬ìš©í•˜ëŠ” ë° í° ë¬¸ì œëŠ” ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ Hyper-Vë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê±°ë‚˜ ê°€ìƒí™” ê´€ë ¨ ê¸°ëŠ¥ì´ ë¶ˆì•ˆì •í•˜ë‹¤ë©´ Hyper-V ê¸°ëŠ¥ ìì²´ë¥¼ ë„ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

```java
$ Get-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V
```

### [Virtual Box + Docker + Jenkins](https://ingnoh.tistory.com/8)

### **[VirtualBox ë³µì‚¬ ë¶™ì—¬ë„£ê¸° ì—ëŸ¬](https://yuldangs-sosolife.tistory.com/entry/Virtual-box-%EA%B0%80%EC%83%81%EA%B4%91%EB%94%94%EC%8A%A4%ED%81%AC-%EC%82%BD%EC%9E%85-%EB%AC%B8%EC%A0%9C)**

ê°€ìƒ ê´‘ ë””ìŠ¤í¬ C:\Program Files\Oracle\VirtualBox\VBoxGuestAdditions.isoì„(ë¥¼) ê°€ìƒ ë¨¸ì‹ ì— ì‚½ì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

mount: wrong fs type, bad option, bad superblock on íŒŒì¼, missing codepage or helper program, or other error

```java
$ sudo apt-get install virtualbox-guest-additions-iso
$ sudo apt-get install virtualbox-guest-utils

$ sudo usermod -G vboxsf -a 'ìœ ì €ì´ë¦„'
$ reboot

$sudo mount -t vboxsf 'ê³µìœ í•  host í´ë” ì´ë¦„' /ìš°ë¶„íˆ¬ë‚´íŒŒì¼ê²½ë¡œ 
```

## AWS í”„ë¦¬í‹°ì–´ì—ì„œ SWAP ë©”ëª¨ë¦¬ ì„¤ì •í•˜ê¸°

[https://ssue-dev.tistory.com/entry/Linux-Swap-Memory-ìŠ¤ì™‘-ë©”ëª¨ë¦¬-ì„¤ì •-ë°©ë²•](https://ssue-dev.tistory.com/entry/Linux-Swap-Memory-%EC%8A%A4%EC%99%91-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95)

[https://seongwon.dev/DevOps/20220715-CICDêµ¬ì¶•ê¸°1/](https://seongwon.dev/DevOps/20220715-CICD%EA%B5%AC%EC%B6%95%EA%B8%B01/)

- ìŠ¤ì™‘ ê³µê°„ì„ ì„¤ì •í•˜ì—¬ ë¶€ì¡±í•œ RAM ë©”ëª¨ë¦¬ë¥¼ í•˜ë“œ ë””ìŠ¤í¬ ê³µê°„ìœ¼ë¡œ í• ë‹¹í•œ ìŠ¤ì™‘ ë©”ëª¨ë¦¬ë¥¼ í†µí•´ ì§„í–‰
- EC2 í”„ë¦¬í‹°ì–´ì—ì„œ CPUê°€ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì— ì£¼ì–´ì§„ ë””ìŠ¤í¬ ìš©ëŸ‰ì„ ë©”ëª¨ë¦¬ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤

```java
// ë©”ëª¨ë¦¬ ìƒíƒœ í™•ì¸
$free -h

// swap íŒŒì¼ì„ ìƒì„±í•´ì¤€ë‹¤. (ë©”ëª¨ë¦¬ ìƒíƒœ í™•ì¸ ì‹œ swapì´ ìˆì—ˆì§€ë§Œ ë””ë ‰í† ë¦¬ íŒŒì¼ì€ ë§Œë“¤ì–´ì¤˜ì•¼í•œë‹¤.)
$ sudo mkdir /var/spool/swap
$ sudo touch /var/spool/swap/swapfile
$ sudo dd if=/dev/zero of=/var/spool/swap/swapfile count=2048000 bs=1024
// swap íŒŒì¼ì„ ì„¤ì •í•œë‹¤.
$ sudo chmod 600 /var/spool/swap/swapfile
$ sudo mkswap /var/spool/swap/swapfile
$ sudo swapon /var/spool/swap/swapfile
// swap íŒŒì¼ì„ ë“±ë¡í•œë‹¤.
$ sudo vim /etc/fstab
íŒŒì¼ì´ ì—´ë¦¬ë©´ í•´ë‹¹ íŒŒì¼ ì•„ë˜ìª½ì— í•˜ë‹¨ ë‚´ìš© ì…ë ¥ í›„ ì €ì¥
- ì…ë ¥ í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëª…ë ¹ì–´ -> if
- íŒŒì¼ ìˆ˜ì • í›„ ì €ì¥í•˜ëŠ” ëª…ë ¹ì–´-> escí‚¤ ëˆ„ë¥¸ í›„ :wq ì…ë ¥ í›„ ì—”í„°
/var/spool/swap/swapfile    none    swap    defaults    0 0
// ë©”ëª¨ë¦¬ ìƒíƒœ í™•ì¸
$free -h
```

```bash
# ì „
               total        used        free      shared  buff/cache   available
Mem:           949Mi       635Mi        78Mi       1.0Mi       235Mi       147Mi
Swap:             0B          0B          0B

# í›„
               total        used        free      shared  buff/cache   available
Mem:           949Mi       618Mi       118Mi       1.0Mi       211Mi       162Mi
Swap:          679Mi          0B       679Mi
```

- **ì´í›„ 2ê¸°ê°€ë¡œ ìˆ˜ì •í•˜ë©´ì„œ ìƒê¸´ ê³¼ì •**
    - 2ê¸°ê°€ë¥¼ ì¶”ê°€í•˜ë©´ì„œ swqpfileì„ í•œ ê°œ ë” ë§Œë“¤ì—ˆë‹¤ (ì´ 2.7ê¸°ê°€ ë¨)
    - ë”°ë¼ì„œ ì²˜ìŒ ë§Œë“  íŒŒì¼ì„ ì§€ì›Œì„œ 2ê¸°ê°€ë¡œ ìˆ˜ì •
    
    ```bash
    damongsanga@ip-172-31-32-115:~$ sudo su
    [sudo] password for damongsanga: 
    root@ip-172-31-32-115:/home/damongsanga# sudo vim /etc/fstab
    root@ip-172-31-32-115:/home/damongsanga# fallocate -l 2G /swapfile
    root@ip-172-31-32-115:/home/damongsanga# free -h
                   total        used        free      shared  buff/cache   available
    Mem:           949Mi       631Mi       109Mi       1.0Mi       207Mi       150Mi
    Swap:          679Mi       0.0Ki       679Mi
    root@ip-172-31-32-115:/home/damongsanga# sudo mkswap /swapfile
    mkswap: /swapfile: insecure permissions 0644, fix with: chmod 0600 /swapfile
    Setting up swapspace version 1, size = 2 GiB (2147479552 bytes)
    no label, UUID=4cd994dc-87e3-4d6a-9381-d727422e439d
    root@ip-172-31-32-115:/home/damongsanga# swapon /swapfile
    swapon: /swapfile: insecure permissions 0644, 0600 suggested.
    root@ip-172-31-32-115:/home/damongsanga# sudo echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
    /swapfile none swap sw 0 0
    root@ip-172-31-32-115:/home/damongsanga# vi /etc/fstab
    root@ip-172-31-32-115:/home/damongsanga# free -h
                   total        used        free      shared  buff/cache   available
    Mem:           949Mi       622Mi       107Mi       1.0Mi       219Mi       160Mi
    Swap:          2.7Gi       0.0Ki       2.7Gi
    root@ip-172-31-32-115:/home/damongsanga# sudo swapon --show
    NAME                     TYPE   SIZE USED PRIO
    /var/spool/swap/swapfile file 679.3M 256K   -2
    /swapfile                file     2G   0B   -3
    root@ip-172-31-32-115:/home/damongsanga# rm /var/spool/swap/swapfile
    rm: cannot remove '/var/spool/swap/swapfile': Operation not permitted
    root@ip-172-31-32-115:/home/damongsanga# sudo swapoff -a
    root@ip-172-31-32-115:/home/damongsanga# sudo rm /var/spool/swap/swapfile
    root@ip-172-31-32-115:/home/damongsanga# sudo vim /etc/fstab
    root@ip-172-31-32-115:/home/damongsanga# sudo swapon --show
    root@ip-172-31-32-115:/home/damongsanga# sudo swapon --show
    root@ip-172-31-32-115:/home/damongsanga# sudo swapon -a
    swapon: /swapfile: insecure permissions 0644, 0600 suggested.
    root@ip-172-31-32-115:/home/damongsanga# sudo swapon --show
    NAME      TYPE SIZE USED PRIO
    /swapfile file   2G   0B   -2
    root@ip-172-31-32-115:/home/damongsanga# free -h
                   total        used        free      shared  buff/cache   available
    Mem:           949Mi       624Mi       111Mi       1.0Mi       213Mi       158Mi
    Swap:          2.0Gi          0B       2.0Gi
    ```
    

# ğŸ˜œÂ Todayâ€™s Small Happiness

# ğŸ§Â Letâ€™s Think About It

- **ì™œ diidê°€ dood ë³´ë‹¤ ë³´ì•ˆì ìœ¼ë¡œ ì•ˆ ì¢‹ì€ê°€????**
- [ìš”ì‚¬ëŒ ë¸”ë¡œê·¸ ê´œì°®ë„¤](https://seongwon.dev/Database/20230515-%EB%AA%A8%EB%AA%A8%ED%8C%80_Redis%EC%BA%90%EC%8B%9C%EB%A5%BC_%ED%86%B5%ED%95%9C_%EC%84%B1%EB%8A%A5_%ED%96%A5%EC%83%81/)

# ğŸ™€Â Got Stuck..