# TIL (Today I Learned)

# 3ì›” 19ì¼ í™”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## âœ¨ì˜¤ëŠ˜ ì§„í–‰í•œ ë‚´ìš©

- [x]  alias ì„¤ì •í•˜ê¸°
    - [x]  docker
    - [x]  docker-composeë§Œ ì¼ë‹¨?
- [x]  front
    - [x]  settings/static í´ë”ë¥¼ ê·¸ëƒ¥**`/usr/share/nginx/html`**ì— ë³¼ë¥¨ë§ˆìš´íŠ¸í•˜ê³  default.conf ìˆ˜ì •?
    - [x]  front ë„ì»¤íŒŒì¼ ìƒì„± â‡’ êµ³ì´ í•„ìš” ì—†ê² ëŠ”ë°? nginx ì‹œì‘ì€ í•´ì•¼ë ë“¯
    
    ```docker
    # prod environment
    FROM nginx:1.25.3
    
    EXPOSE 3001
    
    # nginx ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ë°±ê·¸ë¼ìš´ë“œë¡œ ë™ì‘í•˜ë„ë¡ í•œë‹¤.
    CMD ["nginx", "-g", "daemon off;"]
    ```
    
    - [x]  front íŒŒì´í”„ë¼ì¸ ìˆ˜ì •
- [x]  mysql, redis ë„ì»¤íŒŒì¼ ë§Œë“¤ì–´ë³´ê¸° â‡’ ì•ˆí•˜ê³  docker-composeë¡œ í•´ë´„
- [x]  jenkins ë„ì»¤íŒŒì¼ ë§Œë“¤ê¸°
    
    ```docker
    # ê¸°ë³¸ ì´ë¯¸ì§€ë¡œë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤.
    FROM jenkins/jenkins:lts
    
    # ì  í‚¨ìŠ¤ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ë¥¼ ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
    ENV JENKINS_HOME /var/jenkins_home
    ENV CASC_JENKINS_CONFIG /var/jenkins_home/casc_configs
    
    # í•„ìš”í•œ ë„êµ¬ ë° íŒ¨í‚¤ì§€ ì„¤ì¹˜ë¥¼ ìœ„í•´ ë£¨íŠ¸ ê¶Œí•œìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤.
    USER root
    # íŒ¨í‚¤ì§€ ì—…ë°ì´íŠ¸ ë° í•„ìš”í•œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
    RUN apt-get update && \
        apt-get -y install apt-transport-https ca-certificates curl gnupg2 software-properties-common && \
        curl -fsSL https://download.docker.com/linux/$(. /etc/os-release; echo "$ID")/gpg > /tmp/dkey && \
        apt-key add /tmp/dkey && \
        add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/$(. /etc/os-release; echo "$ID") $(lsb_release -cs) stable" && \
        apt-get update && \
        apt-get -y install docker-ce docker-ce-cli containerd.io docker-compose docker-compose-plugin
    
    RUN echo "ìë°” ì„¤ì¹˜" && sleep 2 && \
        apt-get install -y openjdk-17-jdk
    
    #ì„¤ì¹˜ í›„ docker ê·¸ë£¹ì˜ jenkins ê³„ì • ìƒì„± í›„ í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë³€ê²½
    RUN groupadd -f docker
    RUN usermod -aG docker jenkins
    
    # ì‚¬ìš©ìë¥¼ ë‹¤ì‹œ Jenkinsë¡œ ì „í™˜í•©ë‹ˆë‹¤.
    USER jenkins
    ```
    
- [x]  docker-compose yml ì‘ì„±í•˜ê¸°
    
    ```yaml
    version: '3'
    
    services:
    
      jenkins:
        build:
          context: ./jenkins
          dockerfile: Dockerfile 
        restart: always
        ports:
          - "3100:8080"
          - "50000:50000"
        volumes:
          - /var/jenkins_home:/var/jenkins_home
          - /var/run/docker.sock:/var/run/docker.sock
        user: jenkins
    
      db-dev:
        image: mysql:8.0.36
        restart: always
        ports:
          - "3200:3306"
        environment:
          MYSQL_ROOT_PASSWORD: root
          MYSQL_DATABASE: flowermari
          MYSQL_USER: flowermari
          MYSQL_PASSWORD: flowermari
        volumes:
          - data_volume:/var/lib/mysql
    
      redis:
        image: redis
        restart: always
        ports:
          - "3201:6379"
        environment:
          REDIS_PASSWORD: flowermari
    
      back-dev:
        build:
          context: ./back-dev
          dockerfile: Dockerfile
        ports:
          - "3002:8080"
        depends_on:
          - db-dev
          - redis
    
      front:
        build:
          context: ./front
          dockerfile: Dockerfile
        restart: always
        ports:
          - "3001:3001"
        volumes:
          - ./front/static:/usr/share/nginx/html
          - ./front/conf.d:/etc/nginx/conf.d
        depends_on:
          - back-dev
    
    volumes:
      data_volume:
        external: true
    ```
    
- [x]  **private git ê°€ì ¸ì˜¤ëŠ” íŒŒì´í”„ë¼ì¸ì„ ë§Œë“¤ì–´ì•¼ í• ë“¯ â‡’ docker-compose ì‚¬ìš© ìœ„í•´ í•­ìƒ ìµœì‹  ìœ ì§€ í•„ìš”**
- [x]  docker-compose ì‚¬ìš©í•˜ë„ë¡ back-dev íŒŒì´í”„ë¼ì¸ ë³€ê²½
- [ ]  ì  í‚¨ìŠ¤ ë©€í‹°ë¸Œëœì¹˜ ì „ëµ ê³µë¶€
    
    [https://creampuffy.tistory.com/202](https://creampuffy.tistory.com/202)
    
- [x]  back ë¹Œë“œ ë” ë¹¨ë¦¬ í•˜ëŠ” ë²• ì•Œì•„ë³´ê¸°
    - [gradle.properties](http://gradle.properties) ì‚¬ìš©
    
    ```docker
    # Enable the Gradle daemon
    org.gradle.daemon=true
    
    # Enable parallel build execution
    org.gradle.parallel=true
    ```
    
    ```docker
    ë°©ë²•
    Gradle ë°ëª¬ ì‚¬ìš©: Gradle ë°ëª¬ì„ í™œì„±í™”í•˜ì—¬ ë‹¤ìŒ ë¹Œë“œë¥¼ ë” ë¹ ë¥´ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Gradle ë°ëª¬ì€ ì²˜ìŒ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•ì‹œí‚¤ê³  ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
    ìºì‹œ í™œìš©: Gradleì€ ì´ì „ ë¹Œë“œì—ì„œ ìƒì„±ëœ ìºì‹œë¥¼ í™œìš©í•˜ì—¬ ì¤‘ë³µëœ ì‘ì—…ì„ í”¼í•˜ê³  ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìºì‹œë¥¼ í™œìš©í•˜ë ¤ë©´ Gradle ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìºì‹œ ì„¤ì •ì„ í™œì„±í™”í•˜ê³  ì ì ˆí•œ ìºì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
    ë³‘ë ¬ ë¹Œë“œ: Gradleì€ ë³‘ë ¬ ë¹Œë“œë¥¼ ì§€ì›í•˜ì—¬ ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. --parallel ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë³‘ë ¬ ë¹Œë“œë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    ìµœì í™”ëœ ì¢…ì†ì„± ê´€ë¦¬: ì¢…ì†ì„± ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ì—¬ í•„ìš”í•œ ì¢…ì†ì„±ë§Œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‚¬ìš©í•©ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ì¢…ì†ì„±ì´ë‚˜ ì¤‘ë³µëœ ì¢…ì†ì„±ì„ ì œê±°í•˜ê³  íš¨ìœ¨ì ì¸ ì¢…ì†ì„± ê·¸ë˜í”„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
    ë¶ˆí•„ìš”í•œ ì‘ì—… ì œê±°: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ ì œê±°í•˜ê³  ìµœì†Œí•œì˜ ì‘ì—…ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë¹Œë“œì— í•„ìš”í•œ ì‘ì—…ë§Œ í¬í•¨ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.
    ```
    

## âœ¨ë‚´ì¼ ì§„í–‰í•  ë‚´ìš©

- [ ]  ë°± & mysql ì—°ë™ì´ ê°‘ìê¸° ì•ˆë¨. ì™œê·¸ëŸ¬ì§€?
    - [ ]  ë°©í™”ë²½ ë¬¸ì œëŠ” ì•„ë‹˜ ì–‘ìª½ ë‹¤ ëš«ì–´ì¤Œ
    - [ ]  localhost? ì•„ë‹ˆë©´ ì‹¸í”¼ IP?
    - [ ]  ì•„ë‹ˆë©´ db-dev? ([https://velog.io/@dhk22/Springboot-MySQL-Docker-ë„ì»¤ë¥¼-ì´ìš©í•œ-ì»¨í…Œì´ë„ˆ-í™˜ê²½-êµ¬ì„±](https://velog.io/@dhk22/Springboot-MySQL-Docker-%EB%8F%84%EC%BB%A4%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1))
    - [ ]  docker composeë¡œ ë°”ë€Œë©´ì„œ ì•ˆëœ ê²ƒ ê°™ê¸°ë„ í•´ì„œ.. ë­ê°€ ë¬¸ì œì¼ì§€ ì˜ í™•ì¸í•´ì•¼í• ë“¯
    - [ ]  ì´ê±°ì¼ì§€ë„ (restart : always) [https://tytydev.tistory.com/46](https://tytydev.tistory.com/46) (ì•„ë‹Œë“¯)
- [ ]  docker compose ì „ë¶€ ë‚ ë ¤ë„ ì•ˆë˜ë„¤..

## âœ¨ì§„í–‰í•œ ë‚´ìš©

- docker composeë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì—¬ëŸ¬ê°œ ê´€ë¦¬
- docker-compose ymlì—ì„œ ì§€ì •í•˜ë©´, íŠ¹ì • dockerfileë¡œ ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ë§Œë“¤ ìˆ˜ ìˆìŒ
- jenkinsì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì–´ ê´€ë¦¬í•˜ëŠ” ê±´ ì§€ê¸ˆì€ springbootë¿
- ë”°ë¼ì„œ back-devëŠ” ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ì§€ ì•Šê³  back-dev ë¸Œëœì¹˜ì— ì½”ë“œê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ jenkinsì—ì„œ imageë¥¼ ë§Œë“¦
    - ì´ê±¸ ëŒê³ ì™€ì„œ ê°€ì ¸ì˜´
- jenkinsë‘ frontëŠ” ì´ë¯¸ì§€ ë§Œë“¤ì–´ì„œ ê´€ë¦¬
- redis, mysqlì€ ê·¸ëƒ¥ ê³µí†µ ì´ë¯¸ì§€ ì‚¬ìš©

### ë°°ìš´ ë‚´ìš©

Code Llama AI

[https://huggingface.co/spaces/codellama/codellama-playground](https://huggingface.co/spaces/codellama/codellama-playground)

### íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

- nginx 404 page not found
    - default.conf location try_files ë¼ì¸ ìˆ˜ì •
        
        [https://doooodle932.tistory.com/161](https://doooodle932.tistory.com/161)
        

## âœ¨ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œí’€ì´

### [ìš•ì‹¬ìŸì´ íŒë‹¤](https://www.notion.so/17882a4d1b094a07a4777594ad56084a?pvs=21) (ê³¨ë“œ 3 DP)

### [ì™¸íŒì› ìˆœíšŒ](https://www.notion.so/aeafe947757245dbb1b6ddbdd2cc374a?pvs=21) (ê³¨ë“œ 1. 1ì‹œê°„ ë°˜ ì¡°ê¸ˆ ë„˜ê²Œ ê±¸ë¦¼. ì•„ì£¼ ë§›ìˆëŠ” ë¹„íŠ¸ë§ˆìŠ¤í‚¹ + DP)

## âœ¨ë¸”ë¡œê·¸ ê¸€ ì‘ì„±

# ğŸ˜œÂ Todayâ€™s Small Happiness

- ì˜¤ëŠ˜ ì§„ë„ ì˜ ë‚˜ê°!!

# ğŸ§Â Letâ€™s Think About It

- bboard 2ì°¨ ë¦¬íŒ©í† ë§ (ê±°ì˜ ë‹¤ ì™„ë£Œëœë“¯)

# ğŸ™€Â Got Stuck..