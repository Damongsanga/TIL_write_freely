# TIL (Today I Learned)

# 3ì›” 18ì¼ ì›”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

## âœ¨ì˜¤ëŠ˜ ì§„í–‰í•œ ë‚´ìš©

- [ ]  back íŒŒì´í”„ë¼ì¸ ì‘ì„±ì¤‘
    - [x]  íŒŒì´í”„ë¼ì¸ ì½”ë“œ ì‘ì„±
    - [x]  ssh credentials ì—ì„œ ë¬¸ì œ ë°œìƒ ë‚´ì¼ í•´ê²° í•„ìš”
        
        ```docker
        + ssh -o StrictHostKeyChecking=no flowermari@j10a704.p.ssafy.io sudo docker pull damongsanga/springboot:latest
        Permission denied, please try again.
        Permission denied, please try again.
        flowermari@j10a704.p.ssafy.io: Permission denied (publickey,password).
        ```
        
    - [ ]  back ë¹Œë“œ ë” ë¹¨ë¦¬ í•˜ëŠ” ë²• ì•Œì•„ë³´ê¸°
        
        ```docker
        + echo build start!
        build start!
        + mv ../files/application.yml .
        + chmod +x gradlew
        + ./gradlew clean bootJar
        Starting a Gradle Daemon (subsequent builds will be faster)
        > Task :clean UP-TO-DATE
        ```
        
        ```docker
        ë°©ë²•
        Gradle ë°ëª¬ ì‚¬ìš©: Gradle ë°ëª¬ì„ í™œì„±í™”í•˜ì—¬ ë‹¤ìŒ ë¹Œë“œë¥¼ ë” ë¹ ë¥´ê²Œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Gradle ë°ëª¬ì€ ì²˜ìŒ ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•ì‹œí‚¤ê³  ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë” íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
        
        ìºì‹œ í™œìš©: Gradleì€ ì´ì „ ë¹Œë“œì—ì„œ ìƒì„±ëœ ìºì‹œë¥¼ í™œìš©í•˜ì—¬ ì¤‘ë³µëœ ì‘ì—…ì„ í”¼í•˜ê³  ë¹Œë“œ ì‹œê°„ì„ ë‹¨ì¶•ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìºì‹œë¥¼ í™œìš©í•˜ë ¤ë©´ Gradle ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ìºì‹œ ì„¤ì •ì„ í™œì„±í™”í•˜ê³  ì ì ˆí•œ ìºì‹œ ë””ë ‰í† ë¦¬ë¥¼ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
        
        ë³‘ë ¬ ë¹Œë“œ: Gradleì€ ë³‘ë ¬ ë¹Œë“œë¥¼ ì§€ì›í•˜ì—¬ ì—¬ëŸ¬ ì‘ì—…ì„ ë™ì‹œì— ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œê°„ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. --parallel ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë³‘ë ¬ ë¹Œë“œë¥¼ í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
        ìµœì í™”ëœ ì¢…ì†ì„± ê´€ë¦¬: ì¢…ì†ì„± ê´€ë¦¬ë¥¼ ìµœì í™”í•˜ì—¬ í•„ìš”í•œ ì¢…ì†ì„±ë§Œ ë‹¤ìš´ë¡œë“œí•˜ê³  ì‚¬ìš©í•©ë‹ˆë‹¤. ë¶ˆí•„ìš”í•œ ì¢…ì†ì„±ì´ë‚˜ ì¤‘ë³µëœ ì¢…ì†ì„±ì„ ì œê±°í•˜ê³  íš¨ìœ¨ì ì¸ ì¢…ì†ì„± ê·¸ë˜í”„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.
        
        ë¶ˆí•„ìš”í•œ ì‘ì—… ì œê±°: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ ì‘ì—…ì„ ì œê±°í•˜ê³  ìµœì†Œí•œì˜ ì‘ì—…ë§Œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë¹Œë“œì— í•„ìš”í•œ ì‘ì—…ë§Œ í¬í•¨ì‹œì¼œì•¼ í•©ë‹ˆë‹¤.
        ```
        
- [x]  front íŒŒì´í”„ë¼ì¸ ì‘ì„±
    - [x]  node js ì•ˆê¹”ë¦¬ëŠ” ë¬¸ì œ í•´ê²°í•´ë³´ê¸°
        
        ~~nodejs ë²„ì „ì„ 20.11.0ìœ¼ë¡œ ëª…ì‹œí•˜ì—¬ ìë™ìœ¼ë¡œ nodejs.orgì—ì„œ install ë˜ë„ë¡ ì„¤ì •í•˜ì…¨ëŠ”ë° ì € ì—ëŸ¬ë¡œ installì´ ë˜ì§€ ì•Šê³  ìˆëŠ”ê²Œ ì•„ë‹Œì§€ ì‹¶ìŠµë‹ˆë‹¤~~
        
    - [x]  íŒŒì´í”„ë¼ì¸ ì™„ì„± ë° ì™„ì „ 502 bad gateway íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

## âœ¨ë‚´ì¼ ì§„í–‰í•  ë‚´ìš©

- [ ]  nginx í¬íŠ¸í¬ì›Œë”© ì„¸íŒ…
- [ ]  back ë„ì»¤íŒŒì¼ ê°œì„ 
- [ ]  front ë„ì»¤íŒŒì¼ ìƒì„±
- [ ]  mysql, redis ë„ì»¤íŒŒì¼ ë§Œë“¤ì–´ë³´ê¸°
- [ ]  ì  í‚¨ìŠ¤ ë©€í‹°ë¸Œëœì¹˜ ì „ëµ ê³µë¶€
    
    [https://creampuffy.tistory.com/202](https://creampuffy.tistory.com/202)
    

## âœ¨íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1. jenkins nodejs í”ŒëŸ¬ê·¸ì¸ ì ìš© ë¶ˆê°€ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

- pluginì—ì„œ ì—ëŸ¬
- GPT ë§ë¡œëŠ” ì¸ì¦ì„œ ë¬¸ì œë¼ê³  í•˜ëŠ”ë°.. ë„ì €íˆ ë’¤ì ¸ë´ë„ ì›ì¸ì„ ëª»ì°¾ìŒ

### **Jenkins í™˜ê²½ì„¤ì • (í”ŒëŸ¬ê·¸ì¸ ë¯¸ëŸ¬ì„œë²„ ë³€ê²½)**

[GitHub - lework/jenkins-update-center: Jenkins mirror update center generatorJenkins mirror update center generator. Contribute to lework/jenkins-update-center development by creating an account on GitHub.https://github.com/lework/jenkins-update-center](https://github.com/lework/jenkins-update-center)

![https://codespeed-kr.notion.site/image/https%3A%2F%2Fgithub.com%2Ffluidicon.png?table=block&id=7cd9fc7e-ea46-4b78-9af4-09c1417a1f7f&spaceId=90d2a6ae-af33-4ead-a856-8d06af28dc8e&userId=&cache=v2](https://codespeed-kr.notion.site/image/https%3A%2F%2Fgithub.com%2Ffluidicon.png?table=block&id=7cd9fc7e-ea46-4b78-9af4-09c1417a1f7f&spaceId=90d2a6ae-af33-4ead-a856-8d06af28dc8e&userId=&cache=v2)

[https://opengraph.githubassets.com/99d4740e30c95d9c9c3e6ad8bbda8e1484f1ca1c2cd135f075621bf05af2d937/lework/jenkins-update-center](https://opengraph.githubassets.com/99d4740e30c95d9c9c3e6ad8bbda8e1484f1ca1c2cd135f075621bf05af2d937/lework/jenkins-update-center)

- Jenkins ì»¨í…Œì´ë„ˆ ì¢…ë£Œ

```bash
sudo docker stop jenkins
```

- Jenkins ë°ì´í„°ê°€ ìˆëŠ” ë””ë ‰í† ë¦¬ì— update-center-rootCAs í•˜ìœ„ ë””ë ‰í† ë¦¬ ìƒì„±

```bash
sudo mkdir /jenkins/update-center-rootCAs
```

- CA íŒŒì¼ ë‹¤ìš´ë¡œë“œ

```bash
sudo wget https://cdn.jsdelivr.net/gh/lework/jenkins-update-center/rootCA/update-center.crt -O /jenkins/update-center-rootCAs/update-center.crt
```

- Jenkins í”ŒëŸ¬ê·¸ì¸ ë‹¤ìš´ë¡œë“œ ì‹œ ë¯¸ëŸ¬ì‚¬ì´íŠ¸ë¡œ ëŒ€ì²´ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •

```bash
sudo sed -i 's#https://updates.jenkins.io/update-center.json#https://raw.githubusercontent.com/lework/jenkins-update-center/master/updates/tencent/update-center.json#' /jenkins/hudson.model.UpdateCenter.xml
```

- Jenkins ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘

```bash
sudo docker restart jenkins
```

- ë²„ê·¸ ì—†ì–´ì§..??!! ì™œì§€..?? â‡’ ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì—†ì–´ì§„ê±°ì¼ìˆ˜ë„..!
- Toolsì—ì„œ ë²„ì „ ëª»ê°€ì ¸ì˜¤ëŠ” ë¬¸ì œ
- [https://royleej9.tistory.com/entry/Jenkins-nodejs-ì„¤ì •](https://royleej9.tistory.com/entry/Jenkins-nodejs-%EC%84%A4%EC%A0%95)
    - extract *.zip/*.tar.gzë¡œ í•˜ì..!!
    - [https://nodejs.org/dist/v20.11.0/node-v20.11.0-linux-x64.tar.gz](https://nodejs.org/dist/v20.11.0/node-v20.11.0-linux-x64.tar.gz)
    - ì™ ì§€ ëª¨ë¥´ê² ëŠ”ë° ë²„ì „ ëª… ì§€ì •í•´ì„œ install í•˜ëŠ”ê²Œ ë‚˜ëŠ” selectí•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ì§ì ‘ ì…ë ¥í•˜ëŠ” ì°½ìœ¼ë¡œ ë‚˜ì˜´

![Untitled](TIL%20(Today%20I%20Learned)%201fec48ac4832486f99527b3bbe49bc41/Untitled.png)

![Untitled](TIL%20(Today%20I%20Learned)%201fec48ac4832486f99527b3bbe49bc41/Untitled%201.png)

### 2. nginx 502 bad gateway íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### nginx ì—ëŸ¬ ë¡œê·¸ ì°¾ê¸°

- ë‚˜ëŠ” nginx ì‹¤í–‰ê³¼ ì ‘ì† ê¸°ë¡ì„ ë”°ë¡œ ë‚˜ëˆ„ê¸° ìœ„í•´ ì—¬ê¸°ë‹¤ ë”°ë¡œ ì—ëŸ¬ ê¸°ë¡
    - ë³´í†µì€ /var/log/nginx/access.log;, error.logì— ê¸°ë¡ë¨

```bash
access_log /var/log/nginx/nginx.vhost.access.log;
 error_log /var/log/nginx/nginx.vhost.error.log;
```

- /var/log/nginx/nginx.vhost.error.log;

```bash
2024/03/18 07:22:24 [error] 451049#451049: *4478 connect() failed (111: Connection refused) while connecting to upstream, client: 211.192.252.213, server: j10a704.p.ssafy.io, request: "GET / HTTP/1.1", upstream: "http://43.202.47.135:3001/", host: "j10a704.p.ssafy.io"
2024/03/18 07:41:24 [error] 451048#451048: *4488 connect() failed (111: Connection refused) while connecting to upstream, client: 211.192.252.213, server: j10a704.p.ssafy.io, request: "GET / HTTP/1.1", upstream: "http://43.202.47.135:3001/", host: "j10a704.p.ssafy.io"
2024/03/18 07:41:24 [error] 451048#451048: *4488 connect() failed (111: Connection refused) while connecting to upstream, client: 211.192.252.213, server: j10a704.p.ssafy.io, request: "GET / HTTP/1.1", upstream: "http://43.202.47.135:3001/", host: "j10a704.p.ssafy.io"
2024/03/18 07:41:32 [error] 451048#451048: *4488 connect() failed (111: Connection refused) while connecting to upstream, client: 211.192.252.213, server: j10a704.p.ssafy.io, request: "GET / HTTP/1.1", upstream: "http://43.202.47.135:3001/", host: "j10a704.p.ssafy.io"
```

- upstream ë˜ëŠ” ê³¼ì •ì—ì„œ accessê°€ deniedë˜ëŠ” ê²ƒì„ í™•ì¸
- ê·¸ëŸ°ë° í¬íŠ¸í¬ì›Œë”© ìƒì—ë„, ë°©í™”ë²½ ìƒì—ë„ ë¬¸ì œê°€ ì—†ì—ˆìŒ
- ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ ì£½ì´ê¸°

```bash
root@ip-172-26-12-103:/var/jenkins_home/settings/front# ps -e | grep nginx
 777957 ?        00:00:00 nginx
 777958 ?        00:00:00 nginx
 777959 ?        00:00:00 nginx
 777960 ?        00:00:00 nginx
 777961 ?        00:00:00 nginx
 785622 pts/0    00:00:00 nginx
 785698 pts/0    00:00:00 nginx
 785699 pts/0    00:00:00 nginx
 785700 pts/0    00:00:00 nginx
 785701 pts/0    00:00:00 nginx
root@ip-172-26-12-103:/var/jenkins_home/settings/front# kill 777957 777958 777959 777960 777961
bash: kill: (777958) - No such process
bash: kill: (777959) - No such process
bash: kill: (777960) - No such process
bash: kill: (777961) - No such process
root@ip-172-26-12-103:/var/jenkins_home/settings/front# ps -e | grep nginx
 785622 pts/0    00:00:00 nginx
 785698 pts/0    00:00:00 nginx
 785699 pts/0    00:00:00 nginx
 785700 pts/0    00:00:00 nginx
 785701 pts/0    00:00:00 nginx

```

- docker ì»¨í…Œì´ë„ˆ ë‹¤ì‹œ ì¬ê°€ë™í•˜ê³  nginx ê°€ë™í•˜ê¸°!

```bash
root@ip-172-26-12-103:/var/jenkins_home/settings/front# docker run -td --user=root -v /var/jenkins_home/settings/front:/settings -p 3001:3001 --name front nginx:1.25.3
bd243a099c50007278d4f5e2200d7ab9d2f39d4bf184b2f81eed62f16bff178e
root@ip-172-26-12-103:/var/jenkins_home/settings/front# docker exec -it front ls /settings/front

root@ip-172-26-12-103:/var/jenkins_home/settings/front# docker exec -it front nginx
2024/03/18 08:34:43 [notice] 69#69: using the "epoll" event method
2024/03/18 08:34:43 [notice] 69#69: nginx/1.25.3
2024/03/18 08:34:43 [notice] 69#69: built by gcc 12.2.0 (Debian 12.2.0-14)
2024/03/18 08:34:43 [notice] 69#69: OS: Linux 5.15.0-1055-aws
2024/03/18 08:34:43 [notice] 69#69: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2024/03/18 08:34:43 [notice] 75#75: start worker processes
2024/03/18 08:34:43 [notice] 75#75: start worker process 76
2024/03/18 08:34:43 [notice] 75#75: start worker process 77
2024/03/18 08:34:43 [notice] 75#75: start worker process 78
2024/03/18 08:34:43 [notice] 75#75: start worker process 79

```

- nginx ê°€ë™ ì˜¤ë¥˜ì‹œ

```bash
root@ip-172-26-12-103:/home/flowermari/jenkins# systemctl stop nginx
root@ip-172-26-12-103:/home/flowermari/jenkins# systemctl start nginx
root@ip-172-26-12-103:/home/flowermari/jenkins# nginx
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:443 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to [::]:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use)
```

### 3. front íŒŒì´í”„ë¼ì¸ ê´€ë ¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### pnpm ê¸€ë¡œë²Œ ì„¤ì •

pnpmì„ ê¸€ë¡œë²Œ ì„¤ì •í•´ì•¼ í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŒ

ì•„ë‹ˆë©´ pnpm not found ì—ëŸ¬ë°œìƒ

npm installì€ êµ³ì´í•´ì¤„ í•„ìš” ì—†ìŒ

```jsx
npm i -g pnpm
pnpm i
pnpm run build
```

## âœ¨ë¸”ë¡œê·¸ ê¸€ ì‘ì„±

### **[[JPA] ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ê´€ë¦¬ ì—”í‹°í‹° ì¡°íšŒ ê´€ë ¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](https://velog.io/@damongsanga/JPA-%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8-%EA%B4%80%EB%A6%AC-%EC%97%94%ED%8B%B0%ED%8B%B0-%EC%A1%B0%ED%9A%8C-%EA%B4%80%EB%A0%A8-%ED%8A%B8%EB%9F%AC%EB%B8%94-%EC%8A%88%ED%8C%85)**

# ğŸ˜œÂ Todayâ€™s Small Happiness

# ğŸ§Â Letâ€™s Think About It

- bboard íŒ¨í‚¤ì§€ ë° ë¡¬ë³µ, ë¶ˆí•„ìš”í•œ ì—”í‹°í‹° â†’ idë¡œ ë§¤ê°œë³€ìˆ˜ ì „í™˜ ë¦¬íŒ©í† ë§

# ğŸ™€Â Got Stuck..