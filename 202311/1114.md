# TIL (Today I Learned)

# 11ì›” 14ì¼ í™”ìš”ì¼

# ğŸ˜ƒÂ What I Learned

### [Spring ì—ì„œ ì™¸ë¶€ API ì‚¬ìš©í•˜ê¸°](https://jie0025.tistory.com/531)

- RestTemplate vs WebClient
    - ë™ê¸° vs ë¹„ë™ê¸°
    - ëŠë¦¼ vs ë¹ ë¦„

## [Rest Template](https://blog.naver.com/hj_kim97/222295259904) ë€

- **ì„œë²„-ì„œë²„ í†µì‹ ì— ì‚¬ìš©**í•œë‹¤.
- HpptClientë¥¼ ì¶”ìƒí™”í•´ì„œ ì œê³µí•œë‹¤.
- HTTP ì„œë²„ì™€ì˜ í†µì‹ ì„ ë‹¨ìˆœí™”í•˜ê³  Restful ì›ì¹™ì„ ì§€í‚¨ë‹¤
- ëŒ€ë¶€ë¶„ì´ ë‹¤ë¥¸ APIë¥¼ í˜¸ì¶œí•  ë•Œ RestTemplateë¥¼ ì‚¬ìš©í•œë‹¤.
- Blocking ê¸°ë°˜ì˜ ë™ê¸°ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.
- ì¥ì 
    - **ì‚¬ìš©í•˜ê¸° í¸í•˜ê³ , ì§ê´€ì ì´ë‹¤.**
- ë‹¨ì 
    - **ë™ê¸°ì ì¸ HTTP ìš”ì²­**ì„ í•œë‹¤. (ìš”ì²­ê³¼ ì‘ë‹µì´ ì˜¬ ë•Œê¹Œì§€ ë‹¤ìŒ ì½”ë“œë¡œ ì§„í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤)
    - ì»¤ë„¥ì…˜ í’€ì„ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ ì—°ê²°í•  ë•Œë§ˆë‹¤ ë¡œì»¬ í¬íŠ¸ë¥¼ ì—´ê³ , tcp connectionì„ ë§ºëŠ”ë°
    - ì´ê²ƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ connection poolì„ ì‚¬ìš©í•´ì•¼

- ë™ê¸°ì  ìš”ì²­ & ë¸”ë¡œí‚¹ ìš”ì²­

- ë¹„ë™ê¸°ì  ìš”ì²­ & ë…¼ë¸”ë¡œí‚¹ ìš”ì²­

## [**Rest Template](https://adjh54.tistory.com/234) íŠ¹ì§•**

- ë™ê¸°ì  ìš”ì²­
- **Http ì—­ì§ë ¬í™” (MessageConverter)**
- **ìš”ì²­ ë° ë°”ë””ì˜ ë°ì´í„° í˜•ì‹ ë³€í™˜, ìš”ì²­ ë° ì‘ë‹µ í—¤ë”ì˜ ì½˜í…ì¸  í˜•ì‹ ì„¤ì •**
    - Content-Type Header : ìš”ì²­, ì‘ë‹µì—ì„œ ì „ì†¡ë˜ëŠ” ë°ì´í„°ì˜ í˜•ì‹
    - Accept Header : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­í•œ ë°ì´í„° ìœ í˜•
    - â€¦
    
    ```java
    RestTemplate restTemplate = new RestTemplate();
    HttpHeaders headers = new HttpHeaders();
    headers.add("Content-Type", "application/json"); // ë°ì´í„° í˜•ì‹ ì„¤ì • (text, xml ë“±)
    headers.add("Authorization", "Bearer <access_token>"); // Authorization í—¤ë”ì— Bearer í† í° ì¶”ê°€
    ```
    
- ì¿¼ë¦¬ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ exchange() ë©”ì„œë“œ í˜¸ì¶œ ì‹œ UriComponentsBuilderë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¤ì • ê°€ëŠ¥
- í•´ë‹¹ í´ë˜ìŠ¤ ë‚´ë¶€ì˜ queryParam() ë©”ì†Œë“œ ì‚¬ìš©í•˜ì—¬ ì¿¼ë¦¬ ë§¤ê°œë³€ìˆ˜ ì¶”ê°€ ê°€ëŠ¥

### Rest Template ì‚¬ìš©

1. ì˜ì¡´ì„± ì¶”ê°€
2. ê°ì²´ ìƒì„±
3. Bean ë“±ë¡í•˜ì—¬ Autowiredë¡œ ì£¼ì…
4. Header êµ¬ì„±
    
    ```java
    HttpHeaders headers = new HttpHeaders();
    headers.setContentType(MediaType.APPLICATION_JSON);
    // ë‹¤ì–‘í•œ ContentType ì§€ì • ê°€ëŠ¥
    ```
    
5. Body ì„¤ì •, Entity ìƒì„±
    1. JSON í˜•íƒœë¡œ ê°ì²´ ìƒì„±í•˜ì—¬ ì „ë‹¬í•˜ë ¤ëŠ” ê°’ì„ ë„£ê³ 
    2. ìƒì„±ëœ ê°ì²´ë¥¼ toString()ìœ¼ë¡œ ì§ë ¬í™”í•˜ì—¬
    3. ê·¸ ë¬¸ìì—´ì–¼ headerí¬í•¨í•œ HttpEntity ê°ì²´ë¥¼ ìƒì„±
6. API í˜¸ì¶œ
    - exchange ë©”ì„œë“œ : HTTP ìš”ì²­ì„ ë³´ëƒ„ (GET ë“± ë°©ì‹ ì§€ì •)
    - ì‘ë‹µì€ ResponseEntity ê°ì²´ë¡œ ë°˜í™˜ë˜ë©°, ë°˜í™˜ëœ ë°ì´í„°ëŠ” String Typeì˜ ë³€ìˆ˜ì— í• ë‹¹ë¨
7. ë°˜í™˜ ê°’ í™•ì¸ ë° ì‚¬ìš©

- ì‚¬ìš© ì˜ˆì‹œ ì½”ë“œ

```java
@Service
@SuppressWarnings("unchecked")
public class MyService {

    @Autowired
    private RestTemplate restTemplate;

    public void myMethod() {
        // Request Header ì„¤ì •
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);

// Request Body ì„¤ì •
        // ObjectMapper ìƒì„±
        ObjectMapper objectMapper = new ObjectMapper();
        // JSON ê°ì²´ ìƒì„±
        ObjectNode requestBody = objectMapper.createObjectNode();
        // requestBody.put("key", "value");

// Request Entity ìƒì„±
        HttpEntity entity = new HttpEntity(requestBody.toString(), headers);

// API í˜¸ì¶œ
        String url = "https://solved.ac/api/v3/user/show?handle=bmike0413";
        ResponseEntity response = restTemplate.exchange(url, HttpMethod.GET, entity, String.class);

// Response Body ì¶œë ¥
        System.out.println(response.getBody());}
}
```

## **ObjectMapper ì‚¬ìš© (Jackson)**

- Mavenì´ ì•„ë‹Œ Gradleì„ ì‚¬ìš©í•˜ê³  ìˆìŒìœ¼ë¡œ ObjectJSON ëŒ€ì‹  ObjectMapper ë¥¼ ì‚¬ìš©í•˜ì
1. ì˜ì¡´ì„± ì¶”ê°€

```java
dependencies {
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.13.0'
}
```

1. ObjectMapper â†’ ObjectNode **[Jackson]**
    - ObjectNodeë€ Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤ë¡œ, JSON ê°ì²´ë¥¼ í‘œí˜„í•˜ëŠ” ë° ì‚¬ìš©
    - Jacksonì€ Java ê°ì²´ë¥¼ JSONìœ¼ë¡œ ë³€í™˜í•˜ê±°ë‚˜ JSONì„ Java ê°ì²´ë¡œ ë³€í™˜í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ê°•ë ¥í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

```java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.node.ObjectNode;

public class MyController {

    public String createJson() throws Exception {
        // ObjectMapper ìƒì„±
        ObjectMapper objectMapper = new ObjectMapper();

        // JSON ê°ì²´ ìƒì„±
        ObjectNode jsonObject = objectMapper.createObjectNode();

        // ë°ì´í„° ì¶”ê°€
        jsonObject.put("name", "John Doe");
        jsonObject.put("age", 30);
        jsonObject.put("city", "New York");

        // JSON ë¬¸ìì—´ë¡œ ë³€í™˜
        String jsonString = objectMapper.writeValueAsString(jsonObject);

        return jsonString;
    }
}
```

1. íŒŒì‹±í•˜ì—¬ ì‚¬ìš©
    - JSONì€ ë¬´ì¡°ê±´ Stringìœ¼ë¡œ key, valueë¥¼ ê´€ë¦¬!

```java
import com.fasterxml.jackson.databind.JsonNode;
import com.fasterxml.jackson.databind.ObjectMapper;

public class MyController {

    public void parseJson(String jsonString) throws Exception {
        // ObjectMapper ìƒì„±
        ObjectMapper objectMapper = new ObjectMapper();

        // JSON ë¬¸ìì—´ì„ JsonNodeë¡œ íŒŒì‹±
        JsonNode jsonNode = objectMapper.readTree(jsonString);

        // ë°ì´í„° ì¶”ì¶œ
        String name = jsonNode.get("name").asText();
        int age = jsonNode.get("age").asInt();
        String city = jsonNode.get("city").asText();

        // ì¶”ì¶œí•œ ë°ì´í„° ì‚¬ìš©
        System.out.println("Name: " + name);
        System.out.println("Age: " + age);
        System.out.println("City: " + city);
    }
}
```

### ì§ë ¬í™” vs ì—­ì§ë ¬í™”

- ì§ë ¬í™”
    - ìë°” ê°ì²´ë¥¼ ì™¸ë¶€ ì €ì¥ì†Œì— ì €ì¥í•˜ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡í•˜ê¸° ìœ„í•´ ê°ì²´ë¥¼ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •
    - ê°ì²´ì˜ í•„ë“œê°’ì´ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì— ì“°ì—¬ì§„ë‹¤
- ì—­ì§ë ¬í™”
    - ë°˜ëŒ€ë¡œ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œë¶€í„° ê°ì²´ë¥¼ ì¬êµ¬ì„±í•˜ëŠ” ê³¼ì •
    - ì´ ê³¼ì •ì—ì„œ ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì´ ì–´ë–¤ ê°ì²´ì¸ì§€ ì•Œì•„ì•¼í•˜ê¸° ë–„ë¬¸ì— ê°ì²´ì˜ í´ë˜ìŠ¤ ì •ë³´ê°€ í•¨ê»˜ ì „ë‹¬ë˜ì–´ì•¼

# dbdiagram

[A Free Database Designer for Developers and Analysts](https://dbdiagram.io/d/655325cd7d8bbd646522ce44)

![Untitled](Images/1114.png)

### SQL PK â†’ FK ì—°ê²°

- ë°˜ë“œì‹œ PK ì—¬ì•„.. í•˜ëŠ”ê±´ ì•„ë‹Œë° ìœ ì¼ì„±ì´ ë³´ì¥ë˜ì–´ì•¼ í•˜ëŠ”ë“¯
- ê·¸ëƒ¥ FKë¥¼ ì—°ê²°í•  ë•ŒëŠ” PKë‘ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì 
- ë§Œì•½ N : Mìœ¼ë¡œ ì—°ê²°í•œë‹¤ë©´ ì¤‘ê°„ í…Œì´ë¸”ì„ ì‚¬ìš©í•˜ì—¬ **A_PK > C_1, C_2 < B_PK**

### [Solved.ac](http://Solved.ac) api

- í…ŒìŠ¤íŠ¸ ê²°ê³¼ v3ëŠ” í•œë²ˆì— 900íšŒ ì œí•œ ì¡´ì¬
- ì‹œê°„ì€ ì •í™•íˆ ëª¨ë¦„

## í”„ë¡œì íŠ¸ ì„¸íŒ…

**ë§¥ ê°œë°œ í™˜ê²½ ì„¸íŒ…**

- ì¸í…”ë¦¬ ì œì´ + SpringBoot í™•ì¥ì (ì™„ë£Œ)
- Visual Studio extensions (ì™„ë£Œ)
- Vue.js npm ì„¤ì¹˜ (ì™„ë£Œ)
- MySQL (ì™„ë£Œ)
- MySQL Workbench (ì™„ë£Œ)

**SSAFY COM ê°œë°œ í™˜ê²½ ì„¸íŒ…**

- ì¸í…”ë¦¬ ì œì´ + SpringBoot í™•ì¥ì (ì™„ë£Œ)
- Visual Studio extensions (ì™„ë£Œ)
- Vue.js npm ì„¤ì¹˜ (ì™„ë£Œ)
- MySQL (ì™„ë£Œ)
- MySQL Workbench (ì™„ë£Œ)

# ğŸ˜œÂ Todayâ€™s Small Happiness

- DB ì—°ë™ ì„±ê³µ..!
- API ë°›ì•„ì˜¤ê¸° ì„±ê³µ..!! íì–´ì—‰
- íŠ¸ë˜í”½ ê³„ì‚°í•˜ì—¬ API ì‚¬ìš© ì œí•œì— ë”°ë¥¸ ë¡œì§ êµ¬ì„±

# ğŸ§Â Letâ€™s Think About It

- í•˜ì§€ë§Œ ë™ê¸°í™”ëœ ì½”ë“œì—¬ì„œ APIë¥¼ ë°›ì•„ì˜¤ëŠ”ë° ë„ˆë¬´ ëŠë¦¼, WebClient ì‚¬ìš©í•´ì•¼ í•  ë“¯

# ğŸ™€Â Got Stuck..

-